/*!
* rete-react-plugin v2.0.5
* (c) 2024 Vitaliy Stoliarov
* Released under the MIT license.
* */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("rete"),require("react-dom"),require("rete-render-utils"),require("styled-components"),require("rete-area-plugin")):"function"==typeof define&&define.amd?define(["exports","react","rete","react-dom","rete-render-utils","styled-components","rete-area-plugin"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).ReteReactPlugin={},t.React,t.Rete,t.ReactDOM,t.ReteRenderUtils,t.styled,t.ReteAreaPlugin)}(this,(function(t,e,n,r,o,i,a){"use strict";function u(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}function c(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var l,f,s=c(e),d=c(r),p=u(i);function h(t,e,n){return e=k(e),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,v()?Reflect.construct(e,n||[],k(t).constructor):e.apply(t,n))}function v(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(v=function(){return!!t})()}function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(){b=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new R(r||[]);return o(a,"_invoke",{value:_(t,n,u)}),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var d="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function m(){}function g(){}function w(){}var x={};l(x,a,(function(){return this}));var E=Object.getPrototypeOf,O=E&&E(E(C([])));O&&O!==n&&r.call(O,a)&&(x=O);var j=w.prototype=m.prototype=Object.create(x);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function n(o,i,a,u){var c=s(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,n,r){var o=d;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=S(u,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=s(e,n,r);if("normal"===l.type){if(o=r.done?v:p,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function S(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=s(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function z(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function C(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(typeof e+" is not iterable")}return g.prototype=w,o(j,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:g,configurable:!0}),g.displayName=l(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,l(t,c,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},k(P.prototype),l(P.prototype,u,(function(){return this})),e.AsyncIterator=P,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new P(f(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(j),l(j,c,"Generator"),l(j,a,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=C,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(z),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),z(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;z(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function g(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function x(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g(r.key),r)}}function O(t,e,n){return(e=g(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j(){return j=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j.apply(this,arguments)}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}function P(t,e){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},P(t,e)}function _(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function S(){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},S.apply(this,arguments)}function L(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||R(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){if(t){if("string"==typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(t,e):void 0}}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function N(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=R(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function D(t){var n=t.children,r=t.rendered;return e.useEffect((function(){r()})),n}var I=p.default.svg(l||(l=L(["\n    overflow: visible !important;\n    position: absolute;\n    pointer-events: none;\n    width: 9999px;\n    height: 9999px;\n"]))),T=p.default.path(f||(f=L(["\n    fill: none;\n    stroke-width: 5px;\n    stroke: steelblue;\n    pointer-events: auto;\n    ","\n"])),(function(t){return t.styles&&t.styles(t)}));function M(t){if(t.path)return s.createElement(I,{"data-testid":"connection"},s.createElement(T,{styles:t.styles,d:t.path}))}function W(t){var n,o=z(e.useState(null),2),i=o[0],a=o[1],u=z(e.useState(null),2),c=u[0],l=u[1],f=z(e.useState(null),2),d=f[0],p=f[1],h="x"in t.start?t.start:i,v="x"in t.end?t.end:c,y=(n=e.useRef(!1),e.useEffect((function(){n.current=!0}),[]),{apply:function(t){n.current?queueMicrotask((function(){return r.flushSync(t)})):t()}}),m=t.Component;return e.useEffect((function(){var e="function"==typeof t.start&&t.start((function(t){return y.apply((function(){return a(t)}))})),n="function"==typeof t.end&&t.end((function(t){return y.apply((function(){return l(t)}))}));return function(){e&&e(),n&&n()}}),[]),e.useEffect((function(){h&&v&&t.path(h,v).then((function(t){return y.apply((function(){return p(t)}))}))}),[h,v]),s.createElement(m,{data:t.payload,start:i,end:c,path:d})}var A="__reactContainer$";function F(t,e){return{start:function(n){var r=m({},e(n));function o(n){var o=m({},e(n)),i=o.x-r.x,a=o.y-r.y;r=o,t(i,a)}function i(){window.removeEventListener("pointermove",o),window.removeEventListener("pointerup",i),window.removeEventListener("pointercancel",i)}window.addEventListener("pointermove",o),window.addEventListener("pointerup",i),window.addEventListener("pointercancel",i)}}}function H(t,e){s.useEffect((function(){var n=function(t){if(!e){var n=function(t){for(var e=t;e;){if(e._reactRootContainer||Object.keys(e).some((function(t){return t.startsWith(A)})))return e;e=e.parentElement}}(t.target),r=s.version.startsWith("16")?document:n;r&&(t.stopPropagation(),r.dispatchEvent(function(t){for(var e=new t.constructor(t.type),n=e;n=Object.getPrototypeOf(n);){var r,o=N(Object.getOwnPropertyNames(n));try{for(o.s();!(r=o.n()).done;){var i=r.value;"function"!=typeof e[i]&&Object.defineProperty(e,i,{value:t[i]})}}catch(t){o.e(t)}finally{o.f()}}return e}(t)))}},r=t.current;return null==r||r.addEventListener("pointerdown",n),function(){null==r||r.removeEventListener("pointerdown",n)}}),[t,e])}var B,G=Object.freeze({__proto__:null,useDrag:F,useNoDrag:H,NoDrag:function(t){var e=s.useRef(null);return H(e,t.disabled),s.createElement("span",{ref:e},t.children)}}),$=p.default.input(B||(B=L(["\n  width: 100%;\n  border-radius: 30px;\n  background-color: white;\n  padding: 2px 6px;\n  border: 1px solid #999;\n  font-size: 110%;\n  box-sizing: border-box;\n  ","\n"])),(function(t){return t.styles&&t.styles(t)}));function q(t){var e=z(s.useState(t.data.value),2),n=e[0],r=e[1],o=s.useRef(null);return H(o),s.useEffect((function(){r(t.data.value)}),[t.data.value]),s.createElement($,{value:n,type:t.data.type,ref:o,readOnly:t.data.readonly,onChange:function(e){var n="number"===t.data.type?+e.target.value:e.target.value;r(n),t.data.setValue(n)},styles:t.styles})}var K="rgba(110,136,255,0.8)",Y="#ffd92c",U=24,V="#96b38a",X=Object.freeze({__proto__:null,$nodecolor:K,$nodecolorselected:Y,$socketsize:U,$socketmargin:6,$socketcolor:V,$nodewidth:180}),J=["init","unmount"];function Q(t){var e=t.init,n=t.unmount,r=_(t,J),o=s.useRef(null);return s.useEffect((function(){var t=o.current;return function(){t&&n(t)}}),[]),s.useEffect((function(){o.current&&e(o.current)})),s.createElement("span",j({},r,{ref:o}))}var Z=["name","emit","payload"];function tt(t){var e=t.name,n=t.emit,r=t.payload,o=_(t,Z);return s.createElement(Q,j({},o,{className:e,init:function(t){return n({type:"render",data:{type:"control",element:t,payload:r}})},unmount:function(t){return n({type:"unmount",data:{element:t}})}}))}var et,nt,rt=["name","emit","nodeId","side","socketKey","payload"];function ot(t){var e=t.name,n=t.emit,r=t.nodeId,o=t.side,i=t.socketKey,a=t.payload,u=_(t,rt);return s.createElement(Q,j({},u,{className:e,init:function(t){return n({type:"render",data:{type:"socket",side:o,key:i,nodeId:r,element:t,payload:a}})},unmount:function(t){return n({type:"unmount",data:{element:t}})}}))}var it,at,ut=p.default.div(et||(et=L(["\n    background: ",";\n    border: 2px solid #4e58bf;\n    border-radius: 10px;\n    cursor: pointer;\n    box-sizing: border-box;\n    width: ",";\n    height: ",";\n    padding-bottom: 6px;\n    position: relative;\n    user-select: none;\n    line-height: initial;\n    font-family: Arial;\n\n    &:hover {\n        background: lighten(",",4%);\n    }\n    ","\n    .title {\n        color: white;\n        font-family: sans-serif;\n        font-size: 18px;\n        padding: 8px;\n    }\n    .output {\n        text-align: right;\n    }\n    .input {\n        text-align: left;\n    }\n    .output-socket {\n        text-align: right;\n        margin-right: -","px;\n        display: inline-block;\n    }\n    .input-socket {\n        text-align: left;\n        margin-left: -","px;\n        display: inline-block;\n    }\n    .input-title,.output-title {\n        vertical-align: middle;\n        color: white;\n        display: inline-block;\n        font-family: sans-serif;\n        font-size: 14px;\n        margin: ","px;\n        line-height: ","px;\n    }\n    .input-control {\n        z-index: 1;\n        width: calc(100% - ","px);\n        vertical-align: middle;\n        display: inline-block;\n    }\n    .control {\n        display: block;\n        padding: ","px ","px;\n    }\n    ","\n"])),K,(function(t){return Number.isFinite(t.width)?"".concat(t.width,"px"):"".concat(180,"px")}),(function(t){return Number.isFinite(t.height)?"".concat(t.height,"px"):"auto"}),K,(function(t){return t.selected&&i.css(nt||(nt=L(["\n        background: ",";\n        border-color: #e3c000;\n    "])),Y)}),18,18,6,U,36,6,18,(function(t){return t.styles&&t.styles(t)}));function ct(t){t.sort((function(t,e){var n,r;return((null===(n=t[1])||void 0===n?void 0:n.index)||0)-((null===(r=e[1])||void 0===r?void 0:r.index)||0)}))}function lt(t){var e=Object.entries(t.data.inputs),n=Object.entries(t.data.outputs),r=Object.entries(t.data.controls),o=t.data.selected||!1,i=t.data,a=i.id,u=i.label,c=i.width,l=i.height;return ct(e),ct(n),ct(r),s.createElement(ut,{selected:o,width:c,height:l,styles:t.styles,"data-testid":"node"},s.createElement("div",{className:"title","data-testid":"title"},u),n.map((function(e){var n=z(e,2),r=n[0],o=n[1];return o&&s.createElement("div",{className:"output",key:r,"data-testid":"output-".concat(r)},s.createElement("div",{className:"output-title","data-testid":"output-title"},null==o?void 0:o.label),s.createElement(ot,{name:"output-socket",side:"output",socketKey:r,nodeId:a,emit:t.emit,payload:o.socket,"data-testid":"output-socket"}))})),r.map((function(e){var n=z(e,2),r=n[0],o=n[1];return o?s.createElement(tt,{key:r,name:"control",emit:t.emit,payload:o,"data-testid":"control-".concat(r)}):null})),e.map((function(e){var n=z(e,2),r=n[0],o=n[1];return o&&s.createElement("div",{className:"input",key:r,"data-testid":"input-".concat(r)},s.createElement(ot,{name:"input-socket",side:"input",socketKey:r,nodeId:a,emit:t.emit,payload:o.socket,"data-testid":"input-socket"}),o&&(!o.control||!o.showControl)&&s.createElement("div",{className:"input-title","data-testid":"input-title"},null==o?void 0:o.label),(null==o?void 0:o.control)&&(null==o?void 0:o.showControl)&&s.createElement(tt,{key:r,name:"input-control",emit:t.emit,payload:o.control,"data-testid":"input-control"}))})))}var ft=p.default.div(it||(it=L(["\n    display: inline-block;\n    cursor: pointer;\n    border: 1px solid white;\n    border-radius: ","px;\n    width: ","px;\n    height: ","px;\n    vertical-align: middle;\n    background: ",";\n    z-index: 2;\n    box-sizing: border-box;\n    &:hover {\n      border-width: 4px;\n    }\n    &.multiple {\n      border-color: yellow;\n    }\n"])),12,U,U,V),st=p.default.div(at||(at=L(["\n    border-radius: ","px;\n    padding: ","px;\n    &:hover "," {\n      border-width: 4px;\n    }\n"])),18,6,ft);function dt(t){return s.createElement(st,null,s.createElement(ft,{title:t.data.name}))}var pt=Object.freeze({__proto__:null,vars:X,setup:function(t){var e=void 0===(null==t?void 0:t.socketPositionWatcher)?o.getDOMSocketPosition():null==t?void 0:t.socketPositionWatcher,r=(null==t?void 0:t.customize)||{},i=r.node,a=r.connection,u=r.socket,c=r.control;return{attach:function(t){e.attach(t)},render:function(t,r){if("node"===t.data.type){var l=r.parentScope(),f=i?i(t.data):lt;return f&&s.createElement(f,{data:t.data.payload,emit:function(t){return l.emit(t)}})}if("connection"===t.data.type){var d=a?a(t.data):M,p=t.data.payload,h=p.sourceOutput,v=p.targetInput,y=p.source,m=p.target;return d&&s.createElement(W,{start:t.data.start||function(t){return e.listen(y,"output",h,t)},end:t.data.end||function(t){return e.listen(m,"input",v,t)},path:function(){var t,e=(t=b().mark((function t(e,n){var i,a,u,c,l;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.emit({type:"connectionpath",data:{payload:p,points:[e,n]}});case 2:if(i=t.sent){t.next=5;break}return t.abrupt("return","");case 5:if(a=i.data,u=a.path,c=a.points,l=.3,u||2===c.length){t.next=9;break}throw new Error("cannot render connection with a custom number of points");case 9:if(u){t.next=11;break}return t.abrupt("return",p.isLoop?o.loopConnectionPath(c,l,120):o.classicConnectionPath(c,l));case 11:return t.abrupt("return",u);case 12:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){x(i,r,o,a,u,"next",t)}function u(t){x(i,r,o,a,u,"throw",t)}a(void 0)}))});return function(t,n){return e.apply(this,arguments)}}(),Component:d,payload:t.data.payload})}if("socket"===t.data.type){var g=u?u(t.data):dt;return g&&t.data.payload&&s.createElement(g,{data:t.data.payload})}if("control"===t.data.type){var w=c&&t.data.payload?c(t.data):t.data.payload instanceof n.ClassicPreset.InputControl?q:null;return w&&s.createElement(w,{data:t.data.payload})}}}},Connection:M,Control:q,InputControl:q,Node:lt,NodeStyles:ut,RefControl:tt,RefSocket:ot,Socket:dt});function ht(t,n){var r=e.useRef();function o(){r.current&&clearTimeout(r.current)}return e.useEffect((function(){return o}),[]),[function(){o(),r.current=setTimeout((function(){t()}),n)},o]}var vt,yt,mt,bt,gt,wt="5px",xt=p.default.div(vt||(vt=L(["\n  color: #fff;\n  padding: 4px;\n  border-bottom: 1px solid ",";\n  background-color: ",";\n  cursor: pointer;\n  width: 100%;\n  position: relative;\n  &:first-child {\n    border-top-left-radius: ",";\n    border-top-right-radius: ",";\n  }\n  &:last-child {\n    border-bottom-left-radius: ",";\n    border-bottom-right-radius: ",";\n  }\n  &:hover {\n    background-color: ",";\n  }\n"])),"rgba(69, 103, 255, 0.8)","rgba(110,136,255,0.8)",wt,wt,wt,wt,"rgba(130, 153, 255, 0.8)"),Et=p.default(xt)(yt||(yt=L(["\n    ","\n"])),(function(t){return t.hasSubitems&&i.css(mt||(mt=L(["&:after {\n    content: '►';\n    position: absolute;\n    opacity: 0.6;\n    right: 5px;\n    top: 5px;\n    }"])))})),Ot=p.default.div(bt||(bt=L(["\n    position: absolute;\n    top: 0;\n    left: 100%;\n    width: ","px;\n"])),120);function jt(t){var e,n,r,o,i=z(s.useState(!1),2),a=i[0],u=i[1],c=z(ht(s.useCallback((function(){return u(!1)}),[u]),t.delay),2),l=c[0],f=c[1],d=(null===(e=t.components)||void 0===e||null===(n=e.item)||void 0===n?void 0:n.call(e,t.data))||Et,p=(null===(r=t.components)||void 0===r||null===(o=r.subitems)||void 0===o?void 0:o.call(r,t.data))||Ot;return s.createElement(d,{onClick:function(e){e.stopPropagation(),t.data.handler(),t.hide()},hasSubitems:Boolean(t.data.subitems),onPointerDown:function(t){return t.stopPropagation()},onPointerOver:function(){f(),u(!0)},onPointerLeave:function(){return l&&l()},"data-testid":"context-menu-item"},t.children,t.data.subitems&&a&&s.createElement(p,null,t.data.subitems.map((function(e){return s.createElement(jt,{key:e.key,data:e,delay:t.delay,hide:t.hide,components:t.components},e.label)}))))}var kt,Pt=p.default.input(gt||(gt=L(["\n  color: white;\n  padding: 1px 8px;\n  border: 1px solid white;\n  border-radius: 10px;\n  font-size: 16px;\n  font-family: serif;\n  width: 100%;\n  box-sizing: border-box;\n  background: transparent;\n"])));function _t(t){var e=t.component||Pt;return s.createElement(e,{value:t.value,onInput:function(e){return t.onChange(e.target.value)},onPointerDown:function(t){return t.stopPropagation()},"data-testid":"context-menu-search-input"})}var St=p.default.div(kt||(kt=L(["\n  padding: 10px;\n  width: ","px;\n  margin-top: -20px;\n  margin-left: -","px;\n"])),120,60);function Lt(t){var e,n,r,o,i,a,u=z(ht(t.onHide,t.delay),2),c=u[0],l=u[1],f=z(s.useState(""),2),d=f[0],p=f[1],h=new RegExp(d,"i"),v=t.items.filter((function(t){return t.label.match(h)})),y=(null===(e=t.components)||void 0===e||null===(n=e.main)||void 0===n?void 0:n.call(e))||St,m=(null===(r=t.components)||void 0===r||null===(o=r.common)||void 0===o?void 0:o.call(r))||xt;return s.createElement(y,{onMouseOver:function(){return l()},onMouseLeave:function(){return c&&c()},onWheel:function(t){return t.stopPropagation()},"data-testid":"context-menu"},t.searchBar&&s.createElement(m,null,s.createElement(_t,{value:d,onChange:p,component:null===(i=t.components)||void 0===i||null===(a=i.search)||void 0===a?void 0:a.call(i)})),v.map((function(e){return s.createElement(jt,{key:e.key,data:e,delay:t.delay,hide:t.onHide,components:t.components},e.label)})))}var zt=Object.freeze({__proto__:null,setup:function(t){var e=void 0===(null==t?void 0:t.delay)?1e3:t.delay;return{render:function(n){if("contextmenu"===n.data.type)return s.createElement(Lt,{items:n.data.items,delay:e,searchBar:n.data.searchBar,onHide:n.data.onHide,components:null==t?void 0:t.customize})}}},Item:Et,Subitems:Ot,Menu:St,Search:Pt,Common:xt}),Rt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ct="object"==typeof Rt&&Rt&&Rt.Object===Object&&Rt,Nt="object"==typeof self&&self&&self.Object===Object&&self;Ct||Nt||Function("return this")();var Dt,It="undefined"!=typeof window?e.useLayoutEffect:e.useEffect;function Tt(t={}){const{initializeWithValue:n=!0}=t,[r,o]=e.useState(null),i=e.useCallback((()=>({width:(null==r?void 0:r.offsetWidth)??void 0,height:(null==r?void 0:r.offsetHeight)??void 0})),[null==r?void 0:r.offsetHeight,null==r?void 0:r.offsetWidth]),[a,u]=e.useState((()=>n?i():{width:void 0,height:void 0})),c=e.useCallback((()=>{u(i())}),[null==r?void 0:r.offsetHeight,null==r?void 0:r.offsetWidth]);!function(t,n,r,o){const i=e.useRef(n);It((()=>{i.current=n}),[n]),e.useEffect((()=>{const e=(null==r?void 0:r.current)??window;if(!e||!e.addEventListener)return;const n=t=>{i.current(t)};return e.addEventListener(t,n,o),()=>{e.removeEventListener(t,n,o)}}),[t,r,o])}("resize",c),It((()=>{c()}),[null==r?void 0:r.offsetHeight,null==r?void 0:r.offsetWidth]);const l=[o,a];return l.ref=l[0],l.width=a.width,l.height=a.height,l}function Mt(t){return"".concat(t,"px")}var Wt,At=p.default.div(Dt||(Dt=L(["\n    position: absolute;\n    background: rgba(110, 136, 255, 0.8);\n    border: 1px solid rgb(192 206 212 / 60%);\n"])));function Ft(t){return s.createElement(At,{style:{left:Mt(t.left),top:Mt(t.top),width:Mt(t.width),height:Mt(t.height)},"data-testid":"minimap-node"})}var Ht,Bt=p.default.div(Wt||(Wt=L(["\n  position: absolute;\n  background: rgba(255, 251, 128, 0.32);\n  border: 1px solid #ffe52b;\n"])));function Gt(t){var e=function(e){return e*t.containerWidth},n=function(e){return e/t.containerWidth},r=F((function(e,r){return t.translate(n(-e),n(-r))}),(function(t){return{x:t.pageX,y:t.pageY}}));return s.createElement(Bt,{onPointerDown:r.start,style:{left:Mt(e(t.left)),top:Mt(e(t.top)),width:Mt(e(t.width)),height:Mt(e(t.height))},"data-testid":"minimap-viewport"})}var $t=p.default.div(Ht||(Ht=L(["\n    position: absolute;\n    right: 24px;\n    bottom: 24px;\n    background: rgba(229, 234, 239, 0.65);\n    padding: 20px;\n    overflow: hidden;\n    border: 1px solid #b1b7ff;\n    border-radius: 8px;\n    box-sizing: border-box;\n"])));function qt(t){var n=e.useRef(),r=z(Tt(),2),o=r[0],i=r[1].width;if(!i)return null;var a=function(t){return t*i},u=e.useCallback((function(t){n.current=t,o(t)}),[o]);return s.createElement($t,{size:t.size,style:{width:Mt(t.size*t.ratio),height:Mt(t.size)},onPointerDown:function(t){t.stopPropagation(),t.preventDefault()},onDoubleClick:function(e){if(e.stopPropagation(),e.preventDefault(),n.current){var r=n.current.getBoundingClientRect(),o=(e.clientX-r.left)/(t.size*t.ratio),i=(e.clientY-r.top)/(t.size*t.ratio);t.point(o,i)}},ref:u,"data-testid":"minimap"},i&&t.nodes.map((function(t,e){return s.createElement(Ft,{key:e,left:a(t.left),top:a(t.top),width:a(t.width),height:a(t.height)})})),s.createElement(Gt,j({},t.viewport,{start:t.start,containerWidth:i,translate:t.translate})))}var Kt,Yt=Object.freeze({__proto__:null,setup:function(t){return{render:function(e){if("minimap"===e.data.type)return s.createElement(qt,{nodes:e.data.nodes,size:(null==t?void 0:t.size)||200,ratio:e.data.ratio,viewport:e.data.viewport,start:e.data.start,translate:e.data.translate,point:e.data.point})}}}}),Ut=20,Vt=p.default.div(Kt||(Kt=L(["\n  width: ","px;\n  height: ","px;\n  box-sizing: border-box;\n  background: ",";\n  border: 2px solid white;\n  border-radius: ","px;\n"])),Ut,Ut,(function(t){return t.selected?"#ffd92c":"steelblue"}),Ut);function Xt(t){var e=F((function(e,n){return t.translate(e,n)}),t.pointer),n=t.position,r=n.x,o=n.y;return s.createElement(Vt,{onPointerDown:function(n){n.stopPropagation(),n.preventDefault(),e.start(n),t.pointerdown()},onContextMenu:function(e){e.stopPropagation(),e.preventDefault(),t.contextMenu()},selected:t.selected,style:{position:"absolute",top:"".concat(o-Ut/2,"px"),left:"".concat(r-Ut/2,"px")},"data-testid":"pin"})}var Jt=Object.freeze({__proto__:null,setup:function(t){return{render:function(e,n){var r=e.data,o=n.parentScope(a.BaseAreaPlugin);if("reroute-pins"===r.type)return function(e,n){return s.createElement(s.Fragment,null,e.pins.map((function(e){return s.createElement(Xt,j({},e,{key:e.id,contextMenu:function(){return(null==t?void 0:t.contextMenu)&&t.contextMenu(e.id)},translate:function(n,r){return(null==t?void 0:t.translate)&&t.translate(e.id,n,r)},pointerdown:function(){return(null==t?void 0:t.pointerdown)&&t.pointerdown(e.id)},pointer:n}))})))}(r.data,(function(){return o.area.pointer}))}}}}),Qt=Object.freeze({__proto__:null,classic:pt,contextMenu:zt,minimap:Yt,reroute:Jt}),Zt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),O(n=h(this,e,["react-render"]),"presets",[]),n.renderer=function(t){var e=null==t?void 0:t.createRoot,n=new WeakMap;function r(t){var e=n.get(t);if(e)return e;var r=document.createElement("span");return t.appendChild(r),n.set(t,r).get(t)}function o(t){var e=n.get(t);e&&e.remove(),n.delete(t)}if(e){var i=new WeakMap;return{mount:function(t,n){var o=r(n);return i.has(o)||i.set(o,e(o)),i.get(o).render(t)},unmount:function(t){var e=r(t),n=i.get(e);n&&(n.unmount(),i.delete(e),o(t))}}}return{mount:function(t,e){return d.render(t,r(e))},unmount:function(t){d.unmountComponentAtNode(r(t)),o(t)}}}({createRoot:null==t?void 0:t.createRoot}),n.addPipe((function(t){if(!t||"object"!==w(t)||!("type"in t))return t;if("unmount"===t.type)n.unmount(t.data.element);else if("render"===t.type){if("filled"in t.data&&t.data.filled)return t;if(n.mount(t.data.element,t))return m(m({},t),{},{data:m(m({},t.data),{},{filled:!0})})}return t})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}(e,t),n=e,(r=[{key:"setParent",value:function(t){var n=this;S(k(e.prototype),"setParent",this).call(this,t),this.presets.forEach((function(t){t.attach&&t.attach(n)}))}},{key:"mount",value:function(t,e){var n,r=this.parentScope(),o=N(this.presets);try{for(o.s();!(n=o.n()).done;){var i=n.value.render(e,this);if(i){var a=s.createElement(D,{rendered:function(){return r.emit({type:"rendered",data:e.data})}},i);return this.renderer.mount(a,t),!0}}}catch(t){o.e(t)}finally{o.f()}}},{key:"unmount",value:function(t){this.renderer.unmount(t)}},{key:"addPreset",value:function(t){var e=t;e.attach&&e.attach(this),this.presets.push(e)}}])&&E(n.prototype,r),o&&E(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(n.Scope);t.Drag=G,t.Presets=Qt,t.ReactPlugin=Zt,t.RefComponent=Q,t.useRete=function(t){var n=z(e.useState(null),2),r=n[0],o=n[1],i=e.useRef(),a=z(e.useState(null),2),u=a[0],c=a[1],l=e.useRef(null);return e.useEffect((function(){r&&(i.current&&(i.current.destroy(),r.innerHTML=""),t(r).then((function(t){i.current=t,c(t)})))}),[r,t]),e.useEffect((function(){return function(){i.current&&i.current.destroy()}}),[]),e.useEffect((function(){l.current&&o(l.current)}),[l.current]),[l,u]},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=rete-react-plugin.min.js.map
