{"version":3,"file":"rete-react-plugin.min.js","sources":["src/utils.ts","src/presets/classic/components/Connection.tsx","src/presets/classic/components/ConnectionWrapper.tsx","src/shared/utils.ts","src/shared/drag.tsx","src/presets/classic/components/Control.tsx","src/presets/classic/vars.ts","src/ref-component.tsx","src/presets/classic/components/refs/RefControl.tsx","src/presets/classic/components/refs/RefSocket.tsx","src/presets/classic/components/Node.tsx","src/presets/classic/components/Socket.tsx","src/presets/classic/index.tsx","src/presets/context-menu/hooks.ts","src/presets/context-menu/vars.ts","src/presets/context-menu/styles.ts","src/presets/context-menu/components/Item.tsx","src/presets/context-menu/components/Search.tsx","src/presets/context-menu/components/Menu.tsx","src/presets/context-menu/index.tsx","node_modules/lodash.debounce/index.js","node_modules/usehooks-ts/dist/index.mjs","src/presets/minimap/utils.ts","src/presets/minimap/components/MiniNode.tsx","src/presets/minimap/components/MiniViewport.tsx","src/presets/minimap/components/Minimap.tsx","src/presets/minimap/index.tsx","src/presets/reroute-pins/Pin.tsx","src/presets/reroute-pins/index.tsx","src/index.tsx","src/renderer.ts"],"sourcesContent":["import { useEffect, useRef, useState } from 'react'\nimport { flushSync } from 'react-dom'\n\nexport function Root({ children, rendered }: { children: JSX.Element | null, rendered: () => void }) {\n  useEffect(() => {\n    rendered()\n  })\n\n  return children\n}\n\nexport function syncFlush() {\n  const ready = useRef(false)\n\n  useEffect(() => {\n    ready.current = true\n  }, [])\n\n  return {\n    apply(f: () => void) {\n      if (ready.current) {\n        queueMicrotask(() => flushSync(f))\n      } else {\n        f()\n      }\n    }\n  }\n}\n\nexport function useRete<T extends { destroy(): void }>(create: (el: HTMLElement) => Promise<T>) {\n  const [container, setContainer] = useState<null | HTMLElement>(null)\n  const editorRef = useRef<T>()\n  const [editor, setEditor] = useState<T | null>(null)\n  const ref = useRef(null)\n\n  useEffect(() => {\n    if (container) {\n      if (editorRef.current) {\n        editorRef.current.destroy()\n        container.innerHTML = ''\n      }\n      create(container).then((value) => {\n        editorRef.current = value\n        setEditor(value)\n      })\n    }\n  }, [container, create])\n\n  useEffect(() => {\n    return () => {\n      if (editorRef.current) {\n        editorRef.current.destroy()\n      }\n    }\n  }, [])\n  useEffect(() => {\n    if (ref.current) {\n      setContainer(ref.current)\n    }\n  }, [ref.current])\n\n  return [ref, editor] as const\n}\n","import * as React from 'react'\nimport styled from 'styled-components'\n\nimport { Position } from '../../../types'\nimport { ClassicScheme } from '../types'\n\nconst Svg = styled.svg`\n    overflow: visible !important;\n    position: absolute;\n    pointer-events: none;\n    width: 9999px;\n    height: 9999px;\n`\n\nconst Path = styled.path<{ styles?: (props: any) => any }>`\n    fill: none;\n    stroke-width: 5px;\n    stroke: steelblue;\n    pointer-events: auto;\n    ${props => props.styles && props.styles(props)}\n`\n\nexport function Connection(props: {\n  data: ClassicScheme['Connection'] & { isLoop?: boolean },\n  start: Position | null,\n  end: Position | null,\n  path: string | null,\n  styles?: () => any\n}) {\n  if (!props.path) return\n\n  return (\n    <Svg data-testid=\"connection\">\n      <Path\n        styles={props.styles}\n        d={props.path} />\n    </Svg>\n  )\n}\n","import * as React from 'react'\nimport { useEffect, useState } from 'react'\n\nimport { Position } from '../../../types'\nimport { syncFlush } from '../../../utils'\nimport { ClassicScheme } from '../types'\n\nexport type ConnectionContextValue = { start: Position | null, end: Position | null, path: null | string }\n\ntype PositionWatcher = (cb: (value: Position) => void) => (() => void)\n\ntype Props<Schemes extends ClassicScheme> = {\n    Component: (props: {\n        data: ClassicScheme['Connection'] & { isLoop?: boolean },\n        start: Position | null,\n        end: Position | null,\n        path: string | null,\n        styles?: () => any\n    }) => React.JSX.Element | null,\n    payload: Schemes['Connection']\n    start: Position | PositionWatcher,\n    end: Position | PositionWatcher,\n    path(start: Position, end: Position): Promise<null | string>\n}\n\nexport function ConnectionWrapper<Schemes extends ClassicScheme>(props: Props<Schemes>) {\n  const [computedStart, setStart] = useState<Position | null>(null)\n  const [computedEnd, setEnd] = useState<Position| null>(null)\n  const [path, setPath] = useState<string | null>(null)\n  const start = 'x' in props.start ? props.start : computedStart\n  const end = 'x' in props.end ? props.end : computedEnd\n  const flush = syncFlush()\n  const Component = props.Component\n\n  useEffect(() => {\n    const unwatch1 = typeof props.start === 'function' && props.start(s => flush.apply(() => setStart(s)))\n    const unwatch2 = typeof props.end === 'function' && props.end(s => flush.apply(() => setEnd(s)))\n\n    return () => {\n      unwatch1 && unwatch1()\n      unwatch2 && unwatch2()\n    }\n  }, [])\n  useEffect(() => {\n    if (start && end) props.path(start, end).then(p => flush.apply(() => setPath(p)))\n  }, [start, end])\n\n  return (\n    <Component data={props.payload} start={computedStart} end={computedEnd} path={path} />\n  )\n}\n","export function copyEvent<T extends Event & Record<string, any>>(e: T) {\n  const newEvent = new (e.constructor as { new(type: string): T })(e.type)\n  let current = newEvent\n\n  while ((current = Object.getPrototypeOf(current))) {\n    const keys = Object.getOwnPropertyNames(current)\n\n    for (const k of keys) {\n      const item = newEvent[k]\n\n      if (typeof item === 'function') continue\n\n      Object.defineProperty(newEvent, k, { value: e[k] })\n    }\n  }\n\n  return newEvent\n}\n\nconst rootPrefix = '__reactContainer$'\n\ntype Keys = `${typeof rootPrefix}${string}` | '_reactRootContainer'\ntype ReactNode = { [key in Keys]?: unknown } & HTMLElement\n\nexport function findReactRoot(element: HTMLElement) {\n  let current: ReactNode | null = element as ReactNode\n\n  while (current) {\n    if (current._reactRootContainer || Object.keys(current).some(key => key.startsWith(rootPrefix))) return current\n    current = current.parentElement as ReactNode\n  }\n}\n","import * as React from 'react'\n\nimport { Position } from '../types'\nimport { copyEvent, findReactRoot } from './utils'\n\ntype Translate = (dx: number, dy: number) => void\ntype StartEvent = { pageX: number, pageY: number }\n\nexport function useDrag(translate: Translate, getPointer: (e: StartEvent) => Position) {\n  return {\n    start(e: StartEvent) {\n      let previous = { ...getPointer(e) }\n\n      function move(moveEvent: MouseEvent) {\n        const current = { ...getPointer(moveEvent) }\n        const dx = current.x - previous.x\n        const dy = current.y - previous.y\n\n        previous = current\n\n        translate(dx, dy)\n      }\n      function up() {\n        window.removeEventListener('pointermove', move)\n        window.removeEventListener('pointerup', up)\n        window.removeEventListener('pointercancel', up)\n      }\n\n      window.addEventListener('pointermove', move)\n      window.addEventListener('pointerup', up)\n      window.addEventListener('pointercancel', up)\n    }\n  }\n}\n\nexport function useNoDrag(ref: React.MutableRefObject<HTMLElement | null>, disabled?: boolean) {\n  React.useEffect(() => {\n    const handleClick = (e: PointerEvent) => {\n      if (disabled) return\n\n      const root = findReactRoot(e.target as HTMLElement)\n      const target = React.version.startsWith('16') ? document : root\n\n      if (target) {\n        e.stopPropagation()\n        target.dispatchEvent(copyEvent(e))\n      }\n    }\n    const el = ref.current\n\n    el?.addEventListener('pointerdown', handleClick)\n\n    return () => {\n      el?.removeEventListener('pointerdown', handleClick)\n    }\n  }, [ref, disabled])\n}\n\nexport function NoDrag(props: { children: React.ReactNode, disabled?: boolean }) {\n  const ref = React.useRef<HTMLDivElement | null>(null)\n\n  useNoDrag(ref, props.disabled)\n\n  return <span ref={ref}>{props.children}</span>\n}\n","import * as React from 'react'\nimport { ClassicPreset } from 'rete'\nimport styled from 'styled-components'\n\nimport { Drag } from '../../../shared'\n\nconst Input = styled.input<{ styles?: (props: any) => any }>`\n  width: 100%;\n  border-radius: 30px;\n  background-color: white;\n  padding: 2px 6px;\n  border: 1px solid #999;\n  font-size: 110%;\n  box-sizing: border-box;\n  ${props => props.styles && props.styles(props)}\n`\n\nexport function Control<N extends 'text' | 'number'>(props: { data: ClassicPreset.InputControl<N>, styles?: () => any }) {\n  const [value, setValue] = React.useState(props.data.value)\n  const ref = React.useRef(null)\n\n  Drag.useNoDrag(ref)\n\n  React.useEffect(() => {\n    setValue(props.data.value)\n  }, [props.data.value])\n\n  return (\n    <Input\n      value={value}\n      type={props.data.type}\n      ref={ref}\n      readOnly={props.data.readonly}\n      onChange={e => {\n        const val = (props.data.type === 'number'\n          ? +e.target.value\n          : e.target.value) as typeof props.data['value']\n\n        setValue(val)\n        props.data.setValue(val)\n      }}\n      styles={props.styles}\n    />\n  )\n}\n","export const $nodecolor = 'rgba(110,136,255,0.8)'\nexport const $nodecolorselected = '#ffd92c'\nexport const $socketsize = 24\nexport const $socketmargin = 6\nexport const $socketcolor = '#96b38a'\nexport const $nodewidth = 180\n","import * as React from 'react'\n\ntype RefUpdate = (ref: HTMLElement) => void\ntype BaseProps = { init: RefUpdate, unmount: RefUpdate } & Record<string, unknown>\n\n/**\n * Component for rendering various elements embedded in the React.js component tree.\n */\nexport function RefComponent<Props extends BaseProps>({ init, unmount, ...props }: Props) {\n  const ref = React.useRef<HTMLSpanElement>(null)\n\n  React.useEffect(() => {\n    const element = ref.current\n\n    return () => {\n      if (element) unmount(element)\n    }\n  }, [])\n  React.useEffect(() => {\n    if (ref.current) init(ref.current)\n  })\n\n  return <span {...props} ref={ref} />\n}\n","import * as React from 'react'\nimport { ClassicPreset } from 'rete'\n\nimport { RefComponent } from '../../../../ref-component'\nimport { ClassicScheme, GetControls, ReactArea2D } from '../../types'\n\ntype Props<Scheme extends ClassicScheme> = {\n  name: string\n  emit: (props: ReactArea2D<Scheme>) => void\n  payload: ClassicPreset.Control\n}\n\nexport function RefControl<Scheme extends ClassicScheme>({ name, emit, payload, ...props }: Props<Scheme>) {\n  return <RefComponent\n    {...props}\n    className={name}\n    init={ref => emit({ type: 'render', data: {\n      type: 'control',\n      element: ref,\n      payload: payload as GetControls<Scheme['Node']>\n    } })}\n    unmount={ref => emit({ type: 'unmount', data: { element: ref } })}\n  />\n}\n","import * as React from 'react'\nimport { ClassicPreset, NodeId } from 'rete'\n\nimport { RefComponent } from '../../../../ref-component'\nimport { ClassicScheme, GetSockets, ReactArea2D, Side } from '../../types'\n\ntype Props<Scheme extends ClassicScheme> = {\n  name: string\n  emit: (props: ReactArea2D<Scheme>) => void\n  side: Side\n  nodeId: NodeId\n  socketKey: string\n  payload: ClassicPreset.Socket\n}\n\nexport function RefSocket<Scheme extends ClassicScheme>({ name, emit, nodeId, side, socketKey, payload, ...props }: Props<Scheme>) {\n  return <RefComponent\n    {...props}\n    className={name}\n    init={ref => emit({ type: 'render', data: {\n      type: 'socket',\n      side,\n      key: socketKey,\n      nodeId,\n      element: ref,\n      payload: payload as GetSockets<Scheme['Node']>\n    } })}\n    unmount={ref => emit({ type: 'unmount', data: { element: ref } })}\n  />\n}\n","import * as React from 'react'\nimport styled, { css } from 'styled-components'\n\nimport { ClassicScheme, RenderEmit } from '../types'\nimport { $nodecolor, $nodecolorselected, $nodewidth, $socketmargin, $socketsize } from '../vars'\nimport { RefControl } from './refs/RefControl'\nimport { RefSocket } from './refs/RefSocket'\n\ntype NodeExtraData = { width?: number, height?: number }\n\nexport const NodeStyles = styled.div<NodeExtraData & { selected: boolean, styles?: (props: any) => any }>`\n    background: ${$nodecolor};\n    border: 2px solid #4e58bf;\n    border-radius: 10px;\n    cursor: pointer;\n    box-sizing: border-box;\n    width: ${props => Number.isFinite(props.width) ? `${props.width}px` : `${$nodewidth}px`};\n    height: ${props => Number.isFinite(props.height) ? `${props.height}px` : 'auto'};\n    padding-bottom: 6px;\n    position: relative;\n    user-select: none;\n    line-height: initial;\n    font-family: Arial;\n\n    &:hover {\n        background: lighten(${$nodecolor},4%);\n    }\n    ${props => props.selected && css`\n        background: ${$nodecolorselected};\n        border-color: #e3c000;\n    `}\n    .title {\n        color: white;\n        font-family: sans-serif;\n        font-size: 18px;\n        padding: 8px;\n    }\n    .output {\n        text-align: right;\n    }\n    .input {\n        text-align: left;\n    }\n    .output-socket {\n        text-align: right;\n        margin-right: -${$socketsize / 2 + $socketmargin}px;\n        display: inline-block;\n    }\n    .input-socket {\n        text-align: left;\n        margin-left: -${$socketsize / 2 + $socketmargin}px;\n        display: inline-block;\n    }\n    .input-title,.output-title {\n        vertical-align: middle;\n        color: white;\n        display: inline-block;\n        font-family: sans-serif;\n        font-size: 14px;\n        margin: ${$socketmargin}px;\n        line-height: ${$socketsize}px;\n    }\n    .input-control {\n        z-index: 1;\n        width: calc(100% - ${$socketsize + 2 * $socketmargin}px);\n        vertical-align: middle;\n        display: inline-block;\n    }\n    .control {\n        display: block;\n        padding: ${$socketmargin}px ${$socketsize / 2 + $socketmargin}px;\n    }\n    ${props => props.styles && props.styles(props)}\n`\n\nfunction sortByIndex<T extends [string, undefined | { index?: number }][]>(entries: T) {\n  entries.sort((a, b) => {\n    const ai = a[1]?.index || 0\n    const bi = b[1]?.index || 0\n\n    return ai - bi\n  })\n}\n\ntype Props<S extends ClassicScheme> = {\n    data: S['Node'] & NodeExtraData\n    styles?: () => any\n    emit: RenderEmit<S>\n}\nexport type NodeComponent<Scheme extends ClassicScheme> = (props: Props<Scheme>) => JSX.Element\n\n// eslint-disable-next-line max-statements\nexport function Node<Scheme extends ClassicScheme>(props: Props<Scheme>) {\n  const inputs = Object.entries(props.data.inputs)\n  const outputs = Object.entries(props.data.outputs)\n  const controls = Object.entries(props.data.controls)\n  const selected = props.data.selected || false\n  const { id, label, width, height } = props.data\n\n  sortByIndex(inputs)\n  sortByIndex(outputs)\n  sortByIndex(controls)\n\n  return (\n    <NodeStyles\n      selected={selected}\n      width={width}\n      height={height}\n      styles={props.styles}\n      data-testid=\"node\"\n    >\n      <div className=\"title\" data-testid=\"title\">{label}</div>\n      {/* Outputs */}\n      {outputs.map(([key, output]) => (\n        output && <div className=\"output\" key={key} data-testid={`output-${key}`}>\n          <div className=\"output-title\" data-testid=\"output-title\">{output?.label}</div>\n          <RefSocket\n            name=\"output-socket\"\n            side=\"output\"\n            socketKey={key}\n            nodeId={id}\n            emit={props.emit}\n            payload={output.socket}\n            data-testid=\"output-socket\"\n          />\n        </div>\n      ))}\n      {/* Controls */}\n      {controls.map(([key, control]) => {\n        return control ? <RefControl\n          key={key}\n          name=\"control\"\n          emit={props.emit}\n          payload={control}\n          data-testid={`control-${key}`}\n        /> : null\n      })}\n      {/* Inputs */}\n      {inputs.map(([key, input]) => (\n        input && <div className=\"input\" key={key} data-testid={`input-${key}`}>\n          <RefSocket\n            name=\"input-socket\"\n            side=\"input\"\n            socketKey={key}\n            nodeId={id}\n            emit={props.emit}\n            payload={input.socket}\n            data-testid=\"input-socket\"\n          />\n          {input && (!input.control || !input.showControl) && (\n            <div className=\"input-title\" data-testid=\"input-title\">{input?.label}</div>\n          )}\n          {input?.control && input?.showControl && (\n            <RefControl\n              key={key}\n              name=\"input-control\"\n              emit={props.emit}\n              payload={input.control}\n              data-testid=\"input-control\"\n            />\n          )\n          }\n        </div>\n      ))}\n    </NodeStyles>\n  )\n}\n","import * as React from 'react'\nimport { ClassicPreset } from 'rete'\nimport styled from 'styled-components'\n\nimport { $socketcolor, $socketmargin, $socketsize } from '../vars'\n\nconst Styles = styled.div`\n    display: inline-block;\n    cursor: pointer;\n    border: 1px solid white;\n    border-radius: ${$socketsize/2.0}px;\n    width: ${$socketsize}px;\n    height: ${$socketsize}px;\n    vertical-align: middle;\n    background: ${$socketcolor};\n    z-index: 2;\n    box-sizing: border-box;\n    &:hover {\n      border-width: 4px;\n    }\n    &.multiple {\n      border-color: yellow;\n    }\n`\n\nconst Hoverable = styled.div`\n    border-radius: ${($socketsize + $socketmargin * 2)/2.0}px;\n    padding: ${$socketmargin}px;\n    &:hover ${Styles} {\n      border-width: 4px;\n    }\n`\n\nexport function Socket<T extends ClassicPreset.Socket>(props: { data: T }) {\n  return (\n    <Hoverable>\n      <Styles title={props.data.name} />\n    </Hoverable>\n  )\n}\n","import * as React from 'react'\nimport { ClassicPreset, Scope } from 'rete'\nimport {\n  classicConnectionPath, getDOMSocketPosition,\n  loopConnectionPath, SocketPositionWatcher\n} from 'rete-render-utils'\n\nimport { Position } from '../../types'\nimport { RenderPreset } from '../types'\nimport { Connection } from './components/Connection'\nimport { ConnectionWrapper } from './components/ConnectionWrapper'\nimport { Control } from './components/Control'\nimport { Node } from './components/Node'\nimport { Socket } from './components/Socket'\nimport {\n  ClassicScheme, ExtractPayload, ReactArea2D, RenderEmit\n} from './types'\nimport { AcceptComponent } from './utility-types'\n\nexport { Connection } from './components/Connection'\nexport { Control } from './components/Control'\nexport { Control as InputControl } from './components/Control'\nexport { Node, NodeStyles } from './components/Node'\nexport { RefControl } from './components/refs/RefControl'\nexport { RefSocket } from './components/refs/RefSocket'\nexport { Socket } from './components/Socket'\nexport type { ClassicScheme, ReactArea2D, RenderEmit } from './types'\nexport * as vars from './vars'\n\ntype CustomizationProps<Schemes extends ClassicScheme> = {\n  node?: (data: ExtractPayload<Schemes, 'node'>) => AcceptComponent<typeof data['payload'], { emit: RenderEmit<Schemes> }> | null\n  connection?: (data: ExtractPayload<Schemes, 'connection'>) => AcceptComponent<typeof data['payload']> | null\n  socket?: (data: ExtractPayload<Schemes, 'socket'>) => AcceptComponent<typeof data['payload']> | null\n  control?: (data: ExtractPayload<Schemes, 'control'>) => AcceptComponent<typeof data['payload']> | null\n}\n\ntype ClassicProps<Schemes extends ClassicScheme, K> = {\n  socketPositionWatcher?: SocketPositionWatcher<Scope<never, [K]>>\n  customize?: CustomizationProps<Schemes>\n}\n\n/**\n * Classic preset for rendering nodes, connections, controls and sockets.\n */\nexport function setup<Schemes extends ClassicScheme, K extends ReactArea2D<Schemes>>(\n  props?: ClassicProps<Schemes, K>\n): RenderPreset<Schemes, K> {\n  const positionWatcher = typeof props?.socketPositionWatcher === 'undefined'\n    ? getDOMSocketPosition<Schemes, K>()\n    : props?.socketPositionWatcher\n  const { node, connection, socket, control } = props?.customize || {}\n\n  return {\n    attach(plugin) {\n      positionWatcher.attach(plugin as unknown as Scope<never, [K]>)\n    },\n    // eslint-disable-next-line max-statements, complexity\n    render(context, plugin) {\n      if (context.data.type === 'node') {\n        const parent = plugin.parentScope()\n        const Component = (node ? node(context.data) : Node) as typeof Node\n\n        return (Component &&\n          <Component\n            data={context.data.payload}\n            emit={data => parent.emit(data as any)}\n          />\n        )\n      } else if (context.data.type === 'connection') {\n        const Component = (connection ? connection(context.data) : Connection) as (props: {\n          data: ClassicScheme['Connection'] & { isLoop?: boolean },\n          styles?: () => any\n        }) => React.JSX.Element | null\n        const payload = context.data.payload\n        const { sourceOutput, targetInput, source, target } = payload\n\n        return (Component &&\n          <ConnectionWrapper\n            start={context.data.start || (change => positionWatcher.listen(source, 'output', sourceOutput, change))}\n            end={context.data.end || (change => positionWatcher.listen(target, 'input', targetInput, change))}\n            path={async (start, end) => {\n              type FixImplicitAny = typeof plugin.__scope.produces | undefined\n              const response: FixImplicitAny = await plugin.emit({\n                type: 'connectionpath', data: {\n                  payload,\n                  points: [start, end]\n                }\n              })\n\n              if (!response) return ''\n\n              const { path, points } = response.data\n              const curvature = 0.3\n\n              if (!path && points.length !== 2) throw new Error('cannot render connection with a custom number of points')\n              if (!path) return payload.isLoop\n                ? loopConnectionPath(points as [Position, Position], curvature, 120)\n                : classicConnectionPath(points as [Position, Position], curvature)\n\n              return path\n            }}\n            Component={Component}\n            payload={context.data.payload}\n          />\n        )\n      } else if (context.data.type === 'socket') {\n        const Component = (socket ? socket(context.data) : Socket) as typeof Socket\n\n        return (Component && context.data.payload && <Component data={context.data.payload} />\n        )\n      } else if (context.data.type === 'control') {\n        const Component = control && context.data.payload\n          ? control(context.data)\n          : (\n            context.data.payload instanceof ClassicPreset.InputControl\n              ? Control\n              : null\n          )\n\n        return Component && <Component data={context.data.payload as any} />\n      }\n    }\n  }\n}\n","import { useEffect, useRef } from 'react'\n\nexport function useDebounce(cb: () => void, timeout: number): [null | (() => void), () => void] {\n  const ref = useRef<ReturnType<typeof setTimeout>>()\n\n  function cancel() {\n    ref.current && clearTimeout(ref.current)\n  }\n  const func = () => {\n    cancel()\n\n    ref.current = setTimeout(() => {\n      cb()\n    }, timeout)\n  }\n\n  useEffect(() => cancel, [])\n\n  return [\n    func,\n    cancel\n  ]\n}\n","\nexport const $contextColor = 'rgba(110,136,255,0.8)'\nexport const $contextColorLight = 'rgba(130, 153, 255, 0.8)'\nexport const $contextColorDark = 'rgba(69, 103, 255, 0.8)'\nexport const $contextMenuRound = '5px'\nexport const $width = 120\n","import styled from 'styled-components'\n\nimport { $contextColor, $contextColorDark, $contextColorLight, $contextMenuRound } from './vars'\n\nexport const CommonStyle = styled.div`\n  color: #fff;\n  padding: 4px;\n  border-bottom: 1px solid ${$contextColorDark};\n  background-color: ${$contextColor};\n  cursor: pointer;\n  width: 100%;\n  position: relative;\n  &:first-child {\n    border-top-left-radius: ${$contextMenuRound};\n    border-top-right-radius: ${$contextMenuRound};\n  }\n  &:last-child {\n    border-bottom-left-radius: ${$contextMenuRound};\n    border-bottom-right-radius: ${$contextMenuRound};\n  }\n  &:hover {\n    background-color: ${$contextColorLight};\n  }\n`\n","import * as React from 'react'\nimport styled, { css } from 'styled-components'\n\nimport { useDebounce } from '../hooks'\nimport { CommonStyle } from '../styles'\nimport { Customize, Item } from '../types'\nimport { $width } from '../vars'\n\nexport const ItemStyle = styled(CommonStyle) <{ hasSubitems?: boolean }>`\n    ${props => props.hasSubitems && css`&:after {\n    content: '►';\n    position: absolute;\n    opacity: 0.6;\n    right: 5px;\n    top: 5px;\n    }`}\n`\n\nexport const SubitemStyles = styled.div`\n    position: absolute;\n    top: 0;\n    left: 100%;\n    width: ${$width}px;\n`\n\ntype Props = {\n  data: Item\n  delay: number\n  hide(): void\n  children: React.ReactNode\n  components?: Pick<Customize, 'item' | 'subitems'>\n}\n\nexport function ItemElement(props: Props) {\n  const [visibleSubitems, setVisibleSubitems] = React.useState(false)\n  const setInvisibile = React.useCallback(() => setVisibleSubitems(false), [setVisibleSubitems])\n  const [hide, cancelHide] = useDebounce(setInvisibile, props.delay)\n  const Component = props.components?.item?.(props.data) || ItemStyle\n  const Subitems = props.components?.subitems?.(props.data) || SubitemStyles\n\n  return <Component\n    onClick={e => { e.stopPropagation(); props.data.handler(); props.hide() }}\n    hasSubitems={Boolean(props.data.subitems)}\n    onPointerDown={e => e.stopPropagation()}\n    onPointerOver={() => { cancelHide(); setVisibleSubitems(true) }}\n    onPointerLeave={() => hide && hide()}\n    data-testid=\"context-menu-item\"\n  >\n    {props.children}\n    {props.data.subitems && visibleSubitems && (\n      <Subitems>\n        {props.data.subitems.map(item => (\n          <ItemElement\n            key={item.key}\n            data={item}\n            delay={props.delay}\n            hide={props.hide}\n            components={props.components}\n          >{item.label}</ItemElement>\n        ))}\n      </Subitems>\n    )}\n  </Component>\n}\n","import * as React from 'react'\nimport styled from 'styled-components'\n\nimport { ComponentType } from '../types'\n\nexport const SearchInput = styled.input`\n  color: white;\n  padding: 1px 8px;\n  border: 1px solid white;\n  border-radius: 10px;\n  font-size: 16px;\n  font-family: serif;\n  width: 100%;\n  box-sizing: border-box;\n  background: transparent;\n`\n\nexport function Search(props: { value: string, onChange(value: string): void, component?: ComponentType }) {\n  const Component = props.component || SearchInput\n\n  return (\n    <Component\n      value={props.value}\n      onInput={e => props.onChange((e.target as HTMLInputElement).value)}\n      onPointerDown={e => e.stopPropagation()}\n      data-testid=\"context-menu-search-input\"\n    />\n  )\n}\n","import * as React from 'react'\nimport styled from 'styled-components'\n\nimport { useDebounce } from '../hooks'\nimport { CommonStyle } from '../styles'\nimport { Customize, Item } from '../types'\nimport { $width } from '../vars'\nimport { ItemElement } from './Item'\nimport { Search } from './Search'\n\nexport const Styles = styled.div`\n  padding: 10px;\n  width: ${$width}px;\n  margin-top: -20px;\n  margin-left: -${$width / 2}px;\n`\n\ntype Props = {\n  items: Item[]\n  delay: number\n  searchBar?: boolean\n  onHide(): void\n  components?: Customize\n}\n\nexport function Menu(props: Props) {\n  const [hide, cancelHide] = useDebounce(props.onHide, props.delay)\n  const [filter, setFilter] = React.useState('')\n  const filterRegexp = new RegExp(filter, 'i')\n  const filteredList = props.items.filter(item => (\n    item.label.match(filterRegexp)\n  ))\n  const Component = props.components?.main?.() || Styles\n  const Common = props.components?.common?.() || CommonStyle\n\n  return <Component\n    onMouseOver={() => cancelHide()}\n    onMouseLeave={() => hide && hide()}\n    onWheel={e => e.stopPropagation()}\n    data-testid=\"context-menu\"\n  >\n    {props.searchBar && (\n      <Common>\n        <Search value={filter} onChange={setFilter} component={props.components?.search?.()} />\n      </Common>\n    )}\n    {filteredList.map(item => {\n      return <ItemElement\n        key={item.key}\n        data={item}\n        delay={props.delay}\n        hide={props.onHide}\n        components={props.components}\n      >\n        {item.label}\n      </ItemElement>\n    })}\n  </Component>\n}\n","\nimport * as React from 'react'\nimport { BaseSchemes } from 'rete'\n\nimport { RenderPreset } from '../types'\nimport { Menu } from './components/Menu'\nimport { ContextMenuRender, Customize } from './types'\n\nexport { ItemStyle as Item, SubitemStyles as Subitems } from './components/Item'\nexport { Styles as Menu } from './components/Menu'\nexport { SearchInput as Search } from './components/Search'\nexport { CommonStyle as Common } from './styles'\n\ntype Props = {\n  delay?: number\n  customize?: Customize\n}\n\n/**\n * Preset for rendering context menu.\n */\nexport function setup<Schemes extends BaseSchemes, K extends ContextMenuRender>(props?: Props): RenderPreset<Schemes, K> {\n  const delay = typeof props?.delay === 'undefined' ? 1000 : props.delay\n\n  return {\n    render(context) {\n      if (context.data.type === 'contextmenu') {\n        return <Menu\n          items={context.data.items}\n          delay={delay}\n          searchBar={context.data.searchBar}\n          onHide={context.data.onHide}\n          components={props?.customize}\n        />\n      }\n    }\n  }\n}\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","import { useState, useCallback, useLayoutEffect, useEffect, useRef, useMemo, useReducer } from 'react';\nimport debounce from 'lodash.debounce';\n\n// src/useBoolean/useBoolean.ts\nfunction useBoolean(defaultValue) {\n  const [value, setValue] = useState(!!defaultValue);\n  const setTrue = useCallback(() => {\n    setValue(true);\n  }, []);\n  const setFalse = useCallback(() => {\n    setValue(false);\n  }, []);\n  const toggle = useCallback(() => {\n    setValue((x) => !x);\n  }, []);\n  return { value, setValue, setTrue, setFalse, toggle };\n}\nvar useIsomorphicLayoutEffect = typeof window !== \"undefined\" ? useLayoutEffect : useEffect;\n\n// src/useEventListener/useEventListener.ts\nfunction useEventListener(eventName, handler, element, options) {\n  const savedHandler = useRef(handler);\n  useIsomorphicLayoutEffect(() => {\n    savedHandler.current = handler;\n  }, [handler]);\n  useEffect(() => {\n    const targetElement = (element == null ? void 0 : element.current) ?? window;\n    if (!(targetElement && targetElement.addEventListener))\n      return;\n    const listener = (event) => {\n      savedHandler.current(event);\n    };\n    targetElement.addEventListener(eventName, listener, options);\n    return () => {\n      targetElement.removeEventListener(eventName, listener, options);\n    };\n  }, [eventName, element, options]);\n}\n\n// src/useClickAnyWhere/useClickAnyWhere.ts\nfunction useClickAnyWhere(handler) {\n  useEventListener(\"click\", (event) => {\n    handler(event);\n  });\n}\nfunction useCopyToClipboard() {\n  const [copiedText, setCopiedText] = useState(null);\n  const copy = useCallback(async (text) => {\n    if (!(navigator == null ? void 0 : navigator.clipboard)) {\n      console.warn(\"Clipboard not supported\");\n      return false;\n    }\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopiedText(text);\n      return true;\n    } catch (error) {\n      console.warn(\"Copy failed\", error);\n      setCopiedText(null);\n      return false;\n    }\n  }, []);\n  return [copiedText, copy];\n}\nfunction useCounter(initialValue) {\n  const [count, setCount] = useState(initialValue ?? 0);\n  const increment = () => {\n    setCount((x) => x + 1);\n  };\n  const decrement = () => {\n    setCount((x) => x - 1);\n  };\n  const reset = () => {\n    setCount(initialValue ?? 0);\n  };\n  return {\n    count,\n    increment,\n    decrement,\n    reset,\n    setCount\n  };\n}\nfunction useInterval(callback, delay) {\n  const savedCallback = useRef(callback);\n  useIsomorphicLayoutEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n  useEffect(() => {\n    if (delay === null) {\n      return;\n    }\n    const id = setInterval(() => {\n      savedCallback.current();\n    }, delay);\n    return () => {\n      clearInterval(id);\n    };\n  }, [delay]);\n}\n\n// src/useCountdown/useCountdown.ts\nfunction useCountdown(countdownOptions) {\n  let isDeprecated = false;\n  let countStart, intervalMs, isIncrement, countStop;\n  if (\"seconds\" in countdownOptions) {\n    console.warn(\n      \"[useCountdown:DEPRECATED] new interface is already available (see https://usehooks-ts.com/react-hook/use-countdown), the old version will retire on usehooks-ts@3.\"\n    );\n    isDeprecated = true;\n    countStart = countdownOptions.seconds;\n    intervalMs = countdownOptions.interval;\n    isIncrement = countdownOptions.isIncrement;\n  } else {\n    ({ countStart, intervalMs, isIncrement, countStop } = countdownOptions);\n  }\n  intervalMs = intervalMs ?? 1e3;\n  isIncrement = isIncrement ?? false;\n  countStop = countStop ?? 0;\n  const {\n    count,\n    increment,\n    decrement,\n    reset: resetCounter\n  } = useCounter(countStart);\n  const {\n    value: isCountdownRunning,\n    setTrue: startCountdown,\n    setFalse: stopCountdown\n  } = useBoolean(false);\n  const resetCountdown = () => {\n    stopCountdown();\n    resetCounter();\n  };\n  const countdownCallback = useCallback(() => {\n    if (count === countStop) {\n      stopCountdown();\n      return;\n    }\n    if (isIncrement) {\n      increment();\n    } else {\n      decrement();\n    }\n  }, [count, countStop, decrement, increment, isIncrement, stopCountdown]);\n  useInterval(countdownCallback, isCountdownRunning ? intervalMs : null);\n  return isDeprecated ? [\n    count,\n    {\n      start: startCountdown,\n      stop: stopCountdown,\n      reset: resetCountdown\n    }\n  ] : [\n    count,\n    {\n      startCountdown,\n      stopCountdown,\n      resetCountdown\n    }\n  ];\n}\nfunction useEventCallback(fn) {\n  const ref = useRef(() => {\n    throw new Error(\"Cannot call an event handler while rendering.\");\n  });\n  useIsomorphicLayoutEffect(() => {\n    ref.current = fn;\n  }, [fn]);\n  return useCallback((...args) => ref.current(...args), [ref]);\n}\n\n// src/useLocalStorage/useLocalStorage.ts\nvar IS_SERVER = typeof window === \"undefined\";\nfunction useLocalStorage(key, initialValue, options = {}) {\n  const { initializeWithValue = true } = options;\n  const serializer = useCallback(\n    (value) => {\n      if (options.serializer) {\n        return options.serializer(value);\n      }\n      return JSON.stringify(value);\n    },\n    [options]\n  );\n  const deserializer = useCallback(\n    (value) => {\n      if (options.deserializer) {\n        return options.deserializer(value);\n      }\n      if (value === \"undefined\") {\n        return void 0;\n      }\n      const defaultValue = initialValue instanceof Function ? initialValue() : initialValue;\n      let parsed;\n      try {\n        parsed = JSON.parse(value);\n      } catch (error) {\n        console.error(\"Error parsing JSON:\", error);\n        return defaultValue;\n      }\n      return parsed;\n    },\n    [options, initialValue]\n  );\n  const readValue = useCallback(() => {\n    const initialValueToUse = initialValue instanceof Function ? initialValue() : initialValue;\n    if (IS_SERVER) {\n      return initialValueToUse;\n    }\n    try {\n      const raw = window.localStorage.getItem(key);\n      return raw ? deserializer(raw) : initialValueToUse;\n    } catch (error) {\n      console.warn(`Error reading localStorage key \\u201C${key}\\u201D:`, error);\n      return initialValueToUse;\n    }\n  }, [initialValue, key, deserializer]);\n  const [storedValue, setStoredValue] = useState(() => {\n    if (initializeWithValue) {\n      return readValue();\n    }\n    return initialValue instanceof Function ? initialValue() : initialValue;\n  });\n  const setValue = useEventCallback((value) => {\n    if (IS_SERVER) {\n      console.warn(\n        `Tried setting localStorage key \\u201C${key}\\u201D even though environment is not a client`\n      );\n    }\n    try {\n      const newValue = value instanceof Function ? value(readValue()) : value;\n      window.localStorage.setItem(key, serializer(newValue));\n      setStoredValue(newValue);\n      window.dispatchEvent(new StorageEvent(\"local-storage\", { key }));\n    } catch (error) {\n      console.warn(`Error setting localStorage key \\u201C${key}\\u201D:`, error);\n    }\n  });\n  useEffect(() => {\n    setStoredValue(readValue());\n  }, [key]);\n  const handleStorageChange = useCallback(\n    (event) => {\n      if ((event == null ? void 0 : event.key) && event.key !== key) {\n        return;\n      }\n      setStoredValue(readValue());\n    },\n    [key, readValue]\n  );\n  useEventListener(\"storage\", handleStorageChange);\n  useEventListener(\"local-storage\", handleStorageChange);\n  return [storedValue, setValue];\n}\nvar IS_SERVER2 = typeof window === \"undefined\";\nfunction useMediaQuery(query, options) {\n  const defaultValue = typeof options === \"boolean\" ? options : (options == null ? void 0 : options.defaultValue) ?? false;\n  const initializeWithValue = typeof options === \"boolean\" ? void 0 : (options == null ? void 0 : options.initializeWithValue) ?? void 0;\n  const getMatches = (query2) => {\n    if (IS_SERVER2) {\n      return defaultValue;\n    }\n    return window.matchMedia(query2).matches;\n  };\n  const [matches, setMatches] = useState(() => {\n    if (initializeWithValue) {\n      return getMatches(query);\n    }\n    return defaultValue;\n  });\n  function handleChange() {\n    setMatches(getMatches(query));\n  }\n  useIsomorphicLayoutEffect(() => {\n    const matchMedia = window.matchMedia(query);\n    handleChange();\n    if (matchMedia.addListener) {\n      matchMedia.addListener(handleChange);\n    } else {\n      matchMedia.addEventListener(\"change\", handleChange);\n    }\n    return () => {\n      if (matchMedia.removeListener) {\n        matchMedia.removeListener(handleChange);\n      } else {\n        matchMedia.removeEventListener(\"change\", handleChange);\n      }\n    };\n  }, [query]);\n  return matches;\n}\n\n// src/useDarkMode/useDarkMode.ts\nvar COLOR_SCHEME_QUERY = \"(prefers-color-scheme: dark)\";\nvar LOCAL_STORAGE_KEY = \"usehooks-ts-dark-mode\";\nfunction useDarkMode(options, localStorageKeyProps = LOCAL_STORAGE_KEY) {\n  const counter = useRef(0);\n  counter.current++;\n  const defaultValue = typeof options === \"boolean\" ? options : options == null ? void 0 : options.defaultValue;\n  const localStorageKey = typeof options === \"boolean\" ? localStorageKeyProps ?? LOCAL_STORAGE_KEY : (options == null ? void 0 : options.localStorageKey) ?? LOCAL_STORAGE_KEY;\n  const initializeWithValue = typeof options === \"boolean\" ? void 0 : (options == null ? void 0 : options.initializeWithValue) ?? void 0;\n  const isDarkOS = useMediaQuery(COLOR_SCHEME_QUERY, {\n    initializeWithValue,\n    defaultValue\n  });\n  const [isDarkMode, setDarkMode] = useLocalStorage(\n    localStorageKey,\n    defaultValue ?? isDarkOS ?? false,\n    { initializeWithValue }\n  );\n  useIsomorphicLayoutEffect(() => {\n    if (isDarkOS !== isDarkMode) {\n      setDarkMode(isDarkOS);\n    }\n  }, [isDarkOS]);\n  return {\n    isDarkMode,\n    toggle: () => {\n      setDarkMode((prev) => !prev);\n    },\n    enable: () => {\n      setDarkMode(true);\n    },\n    disable: () => {\n      setDarkMode(false);\n    },\n    set: (value) => {\n      setDarkMode(value);\n    }\n  };\n}\nfunction useDebounce(value, delay) {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay ?? 500);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [value, delay]);\n  return debouncedValue;\n}\nfunction useUnmount(func) {\n  const funcRef = useRef(func);\n  funcRef.current = func;\n  useEffect(\n    () => () => {\n      funcRef.current();\n    },\n    []\n  );\n}\n\n// src/useDebounceCallback/useDebounceCallback.ts\nfunction useDebounceCallback(func, delay = 500, options) {\n  const debouncedFunc = useRef();\n  useUnmount(() => {\n    if (debouncedFunc.current) {\n      debouncedFunc.current.cancel();\n    }\n  });\n  const debounced = useMemo(() => {\n    const debouncedFuncInstance = debounce(func, delay, options);\n    const wrappedFunc = (...args) => {\n      return debouncedFuncInstance(...args);\n    };\n    wrappedFunc.cancel = () => {\n      debouncedFuncInstance.cancel();\n    };\n    wrappedFunc.isPending = () => {\n      return !!debouncedFunc.current;\n    };\n    wrappedFunc.flush = () => {\n      return debouncedFuncInstance.flush();\n    };\n    return wrappedFunc;\n  }, [func, delay, options]);\n  useEffect(() => {\n    debouncedFunc.current = debounce(func, delay, options);\n  }, [func, delay, options]);\n  return debounced;\n}\nfunction useDebounceValue(initialValue, delay, options) {\n  const eq = (options == null ? void 0 : options.equalityFn) ?? ((left, right) => left === right);\n  const unwrappedInitialValue = initialValue instanceof Function ? initialValue() : initialValue;\n  const [debouncedValue, setDebouncedValue] = useState(unwrappedInitialValue);\n  const previousValueRef = useRef(unwrappedInitialValue);\n  const updateDebouncedValue = useDebounceCallback(\n    setDebouncedValue,\n    delay,\n    options\n  );\n  if (!eq(previousValueRef.current, unwrappedInitialValue)) {\n    updateDebouncedValue(unwrappedInitialValue);\n    previousValueRef.current = unwrappedInitialValue;\n  }\n  return [debouncedValue, updateDebouncedValue];\n}\nfunction useDocumentTitle(title, options = {}) {\n  const { preserveTitleOnUnmount = true } = options;\n  const defaultTitle = useRef(null);\n  useIsomorphicLayoutEffect(() => {\n    defaultTitle.current = window.document.title;\n  }, []);\n  useIsomorphicLayoutEffect(() => {\n    window.document.title = title;\n  }, [title]);\n  useUnmount(() => {\n    if (!preserveTitleOnUnmount && defaultTitle.current) {\n      window.document.title = defaultTitle.current;\n    }\n  });\n}\nfunction useEffectOnce(effect) {\n  useEffect(effect, []);\n}\nfunction useElementSize(options = {}) {\n  const { initializeWithValue = true } = options;\n  const [ref, setRef] = useState(null);\n  const readValue = useCallback(() => {\n    return {\n      width: (ref == null ? void 0 : ref.offsetWidth) ?? void 0,\n      height: (ref == null ? void 0 : ref.offsetHeight) ?? void 0\n    };\n  }, [ref == null ? void 0 : ref.offsetHeight, ref == null ? void 0 : ref.offsetWidth]);\n  const [size, setSize] = useState(() => {\n    if (initializeWithValue) {\n      return readValue();\n    }\n    return { width: void 0, height: void 0 };\n  });\n  const handleSize = useCallback(() => {\n    setSize(readValue());\n  }, [ref == null ? void 0 : ref.offsetHeight, ref == null ? void 0 : ref.offsetWidth]);\n  useEventListener(\"resize\", handleSize);\n  useIsomorphicLayoutEffect(() => {\n    handleSize();\n  }, [ref == null ? void 0 : ref.offsetHeight, ref == null ? void 0 : ref.offsetWidth]);\n  const result = [setRef, size];\n  result.ref = result[0];\n  result.width = size.width;\n  result.height = size.height;\n  return result;\n}\nfunction useFetch(url, options) {\n  const cache = useRef({});\n  const cancelRequest = useRef(false);\n  const initialState = {\n    error: void 0,\n    data: void 0\n  };\n  const fetchReducer = (state2, action) => {\n    switch (action.type) {\n      case \"loading\":\n        return { ...initialState };\n      case \"fetched\":\n        return { ...initialState, data: action.payload };\n      case \"error\":\n        return { ...initialState, error: action.payload };\n      default:\n        return state2;\n    }\n  };\n  const [state, dispatch] = useReducer(fetchReducer, initialState);\n  useEffect(() => {\n    if (!url)\n      return;\n    cancelRequest.current = false;\n    const fetchData = async () => {\n      dispatch({ type: \"loading\" });\n      const currentCache = cache.current[url];\n      if (currentCache) {\n        dispatch({ type: \"fetched\", payload: currentCache });\n        return;\n      }\n      try {\n        const response = await fetch(url, options);\n        if (!response.ok) {\n          throw new Error(response.statusText);\n        }\n        const data = await response.json();\n        cache.current[url] = data;\n        if (cancelRequest.current)\n          return;\n        dispatch({ type: \"fetched\", payload: data });\n      } catch (error) {\n        if (cancelRequest.current)\n          return;\n        dispatch({ type: \"error\", payload: error });\n      }\n    };\n    void fetchData();\n    return () => {\n      cancelRequest.current = true;\n    };\n  }, [url]);\n  return state;\n}\nfunction useHover(elementRef) {\n  const [value, setValue] = useState(false);\n  const handleMouseEnter = () => {\n    setValue(true);\n  };\n  const handleMouseLeave = () => {\n    setValue(false);\n  };\n  useEventListener(\"mouseenter\", handleMouseEnter, elementRef);\n  useEventListener(\"mouseleave\", handleMouseLeave, elementRef);\n  return value;\n}\nfunction useImageOnLoad() {\n  const [isLoaded, setIsLoaded] = useState(false);\n  const handleImageOnLoad = () => {\n    setIsLoaded(true);\n  };\n  const css = {\n    // Thumbnail style.\n    thumbnail: {\n      visibility: isLoaded ? \"hidden\" : \"visible\",\n      filter: \"blur(8px)\",\n      transition: \"visibility 0ms ease-out 500ms\"\n    },\n    // Full image style.\n    fullSize: {\n      opacity: isLoaded ? 1 : 0,\n      transition: \"opacity 500ms ease-in 0ms\"\n    }\n  };\n  return { handleImageOnLoad, css };\n}\nfunction useIntersectionObserver(optionsOrLegacyRef, legacyOptions) {\n  var _a;\n  const isLegacySignature = \"current\" in optionsOrLegacyRef;\n  const options = isLegacySignature ? legacyOptions : optionsOrLegacyRef;\n  const {\n    threshold = 0,\n    root = null,\n    rootMargin = \"0%\",\n    freezeOnceVisible = false,\n    initialIsIntersecting = false\n  } = options ?? {};\n  const [newRef, setNewRef] = useState(null);\n  const ref = isLegacySignature ? optionsOrLegacyRef.current : newRef;\n  const [state, setState] = useState(() => ({\n    isIntersecting: initialIsIntersecting,\n    entry: void 0\n  }));\n  const callbackRef = useRef();\n  callbackRef.current = options == null ? void 0 : options.onChange;\n  const frozen = ((_a = state.entry) == null ? void 0 : _a.isIntersecting) && freezeOnceVisible;\n  useEffect(() => {\n    if (!ref)\n      return;\n    if (!(\"IntersectionObserver\" in window))\n      return;\n    if (frozen)\n      return;\n    let unobserve;\n    const observer = new IntersectionObserver(\n      (entries) => {\n        const thresholds = Array.isArray(observer.thresholds) ? observer.thresholds : [observer.thresholds];\n        entries.forEach((entry) => {\n          const isIntersecting = entry.isIntersecting && thresholds.some((threshold2) => entry.intersectionRatio >= threshold2);\n          setState({ isIntersecting, entry });\n          if (callbackRef.current) {\n            callbackRef.current(isIntersecting, entry);\n          }\n          if (isIntersecting && freezeOnceVisible && unobserve) {\n            unobserve();\n            unobserve = void 0;\n          }\n        });\n      },\n      { threshold, root, rootMargin }\n    );\n    observer.observe(ref);\n    return () => {\n      observer.disconnect();\n    };\n  }, [\n    ref,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    JSON.stringify(threshold),\n    root,\n    rootMargin,\n    frozen,\n    freezeOnceVisible\n  ]);\n  const prevRef = useRef(null);\n  useEffect(() => {\n    var _a2;\n    if (!ref && ((_a2 = state.entry) == null ? void 0 : _a2.target) && !freezeOnceVisible && !frozen && prevRef.current !== state.entry.target) {\n      prevRef.current = state.entry.target;\n      setState({ isIntersecting: initialIsIntersecting, entry: void 0 });\n    }\n  }, [ref, state.entry, freezeOnceVisible, frozen, initialIsIntersecting]);\n  if (isLegacySignature) {\n    return state.entry;\n  }\n  const result = [\n    setNewRef,\n    !!state.isIntersecting,\n    state.entry\n  ];\n  result.ref = result[0];\n  result.isIntersecting = result[1];\n  result.entry = result[2];\n  return result;\n}\nfunction useIsClient() {\n  const [isClient, setClient] = useState(false);\n  useEffect(() => {\n    setClient(true);\n  }, []);\n  return isClient;\n}\nfunction useIsFirstRender() {\n  const isFirst = useRef(true);\n  if (isFirst.current) {\n    isFirst.current = false;\n    return true;\n  }\n  return isFirst.current;\n}\nfunction useIsMounted() {\n  const isMounted = useRef(false);\n  useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  return useCallback(() => isMounted.current, []);\n}\nfunction useLockedBody(initialLocked = false, rootId = \"___gatsby\") {\n  const [locked, setLocked] = useState(initialLocked);\n  useIsomorphicLayoutEffect(() => {\n    if (!locked) {\n      return;\n    }\n    const originalOverflow = document.body.style.overflow;\n    const originalPaddingRight = document.body.style.paddingRight;\n    document.body.style.overflow = \"hidden\";\n    const root = document.getElementById(rootId);\n    const scrollBarWidth = root ? root.offsetWidth - root.scrollWidth : 0;\n    if (scrollBarWidth) {\n      document.body.style.paddingRight = `${scrollBarWidth}px`;\n    }\n    return () => {\n      document.body.style.overflow = originalOverflow;\n      if (scrollBarWidth) {\n        document.body.style.paddingRight = originalPaddingRight;\n      }\n    };\n  }, [locked]);\n  useEffect(() => {\n    if (locked !== initialLocked) {\n      setLocked(initialLocked);\n    }\n  }, [initialLocked]);\n  return [locked, setLocked];\n}\nfunction useMap(initialState = /* @__PURE__ */ new Map()) {\n  const [map, setMap] = useState(new Map(initialState));\n  const actions = {\n    set: useCallback((key, value) => {\n      setMap((prev) => {\n        const copy = new Map(prev);\n        copy.set(key, value);\n        return copy;\n      });\n    }, []),\n    setAll: useCallback((entries) => {\n      setMap(() => new Map(entries));\n    }, []),\n    remove: useCallback((key) => {\n      setMap((prev) => {\n        const copy = new Map(prev);\n        copy.delete(key);\n        return copy;\n      });\n    }, []),\n    reset: useCallback(() => {\n      setMap(() => /* @__PURE__ */ new Map());\n    }, [])\n  };\n  return [map, actions];\n}\n\n// src/useOnClickOutside/useOnClickOutside.ts\nfunction useOnClickOutside(ref, handler, eventType = \"mousedown\") {\n  useEventListener(eventType, (event) => {\n    const target = event.target;\n    if (!target || !target.isConnected) {\n      return;\n    }\n    const isOutside = Array.isArray(ref) ? ref.every((r) => r.current && !r.current.contains(target)) : ref.current && !ref.current.contains(target);\n    if (isOutside) {\n      handler(event);\n    }\n  });\n}\nvar IS_SERVER3 = typeof window === \"undefined\";\nfunction useReadLocalStorage(key, options = {}) {\n  let { initializeWithValue = true } = options;\n  if (IS_SERVER3) {\n    initializeWithValue = false;\n  }\n  const deserializer = useCallback(\n    (value) => {\n      if (options.deserializer) {\n        return options.deserializer(value);\n      }\n      if (value === \"undefined\") {\n        return void 0;\n      }\n      let parsed;\n      try {\n        parsed = JSON.parse(value);\n      } catch (error) {\n        console.error(\"Error parsing JSON:\", error);\n        return null;\n      }\n      return parsed;\n    },\n    [options]\n  );\n  const readValue = useCallback(() => {\n    if (IS_SERVER3) {\n      return null;\n    }\n    try {\n      const raw = window.localStorage.getItem(key);\n      return raw ? deserializer(raw) : null;\n    } catch (error) {\n      console.warn(`Error reading localStorage key \\u201C${key}\\u201D:`, error);\n      return null;\n    }\n  }, [key, deserializer]);\n  const [storedValue, setStoredValue] = useState(() => {\n    if (initializeWithValue) {\n      return readValue();\n    }\n    return void 0;\n  });\n  useEffect(() => {\n    setStoredValue(readValue());\n  }, [key]);\n  const handleStorageChange = useCallback(\n    (event) => {\n      if ((event == null ? void 0 : event.key) && event.key !== key) {\n        return;\n      }\n      setStoredValue(readValue());\n    },\n    [key, readValue]\n  );\n  useEventListener(\"storage\", handleStorageChange);\n  useEventListener(\"local-storage\", handleStorageChange);\n  return storedValue;\n}\nvar initialSize = {\n  width: void 0,\n  height: void 0\n};\nfunction useResizeObserver(options) {\n  const { ref, box = \"content-box\" } = options;\n  const [{ width, height }, setSize] = useState(initialSize);\n  const isMounted = useIsMounted();\n  const previousSize = useRef({ ...initialSize });\n  const onResize = useRef(void 0);\n  onResize.current = options == null ? void 0 : options.onResize;\n  useEffect(() => {\n    if (!(ref == null ? void 0 : ref.current))\n      return;\n    if (typeof window === \"undefined\" || !(\"ResizeObserver\" in window))\n      return;\n    const observer = new ResizeObserver(([entry]) => {\n      const boxProp = box === \"border-box\" ? \"borderBoxSize\" : box === \"device-pixel-content-box\" ? \"devicePixelContentBoxSize\" : \"contentBoxSize\";\n      const newWidth = extractSize(entry, boxProp, \"inlineSize\");\n      const newHeight = extractSize(entry, boxProp, \"blockSize\");\n      const hasChanged = previousSize.current.width !== newWidth || previousSize.current.height !== newHeight;\n      if (hasChanged) {\n        const newSize = { width: newWidth, height: newHeight };\n        previousSize.current.width = newWidth;\n        previousSize.current.height = newHeight;\n        if (onResize == null ? void 0 : onResize.current) {\n          onResize.current(newSize);\n        } else {\n          if (isMounted()) {\n            setSize(newSize);\n          }\n        }\n      }\n    });\n    observer.observe(ref.current, { box });\n    return () => {\n      observer.disconnect();\n    };\n  }, [box, ref, isMounted]);\n  return { width, height };\n}\nfunction extractSize(entry, box, sizeType) {\n  if (!entry[box]) {\n    if (box === \"contentBoxSize\") {\n      return entry.contentRect[sizeType === \"inlineSize\" ? \"width\" : \"height\"];\n    }\n    return void 0;\n  }\n  return Array.isArray(entry[box]) ? entry[box][0][sizeType] : (\n    // @ts-ignore Support Firefox's non-standard behavior\n    entry[box][sizeType]\n  );\n}\nvar IS_SERVER4 = typeof window === \"undefined\";\nfunction useScreen(options = {}) {\n  let { initializeWithValue = true } = options;\n  if (IS_SERVER4) {\n    initializeWithValue = false;\n  }\n  const readScreen = () => {\n    if (IS_SERVER4) {\n      return void 0;\n    }\n    return window.screen;\n  };\n  const [screen, setScreen] = useState(() => {\n    if (initializeWithValue) {\n      return readScreen();\n    }\n    return void 0;\n  });\n  const debouncedSetScreen = useDebounceCallback(\n    setScreen,\n    options == null ? void 0 : options.debounceDelay\n  );\n  function handleSize() {\n    const newScreen = readScreen();\n    const setSize = (options == null ? void 0 : options.debounceDelay) ? debouncedSetScreen : setScreen;\n    if (newScreen) {\n      const {\n        width,\n        height,\n        availHeight,\n        availWidth,\n        colorDepth,\n        orientation,\n        pixelDepth\n      } = newScreen;\n      setSize({\n        width,\n        height,\n        availHeight,\n        availWidth,\n        colorDepth,\n        orientation,\n        pixelDepth\n      });\n    }\n  }\n  useEventListener(\"resize\", handleSize);\n  useIsomorphicLayoutEffect(() => {\n    handleSize();\n  }, []);\n  return screen;\n}\nvar cachedScriptStatuses = /* @__PURE__ */ new Map();\nfunction getScriptNode(src) {\n  const node = document.querySelector(\n    `script[src=\"${src}\"]`\n  );\n  const status = node == null ? void 0 : node.getAttribute(\"data-status\");\n  return {\n    node,\n    status\n  };\n}\nfunction useScript(src, options) {\n  const [status, setStatus] = useState(() => {\n    if (!src || (options == null ? void 0 : options.shouldPreventLoad)) {\n      return \"idle\";\n    }\n    if (typeof window === \"undefined\") {\n      return \"loading\";\n    }\n    return cachedScriptStatuses.get(src) ?? \"loading\";\n  });\n  useEffect(() => {\n    if (!src || (options == null ? void 0 : options.shouldPreventLoad)) {\n      return;\n    }\n    const cachedScriptStatus = cachedScriptStatuses.get(src);\n    if (cachedScriptStatus === \"ready\" || cachedScriptStatus === \"error\") {\n      setStatus(cachedScriptStatus);\n      return;\n    }\n    const script = getScriptNode(src);\n    let scriptNode = script.node;\n    if (!scriptNode) {\n      scriptNode = document.createElement(\"script\");\n      scriptNode.src = src;\n      scriptNode.async = true;\n      if (options == null ? void 0 : options.id) {\n        scriptNode.id = options.id;\n      }\n      scriptNode.setAttribute(\"data-status\", \"loading\");\n      document.body.appendChild(scriptNode);\n      const setAttributeFromEvent = (event) => {\n        const scriptStatus = event.type === \"load\" ? \"ready\" : \"error\";\n        scriptNode == null ? void 0 : scriptNode.setAttribute(\"data-status\", scriptStatus);\n      };\n      scriptNode.addEventListener(\"load\", setAttributeFromEvent);\n      scriptNode.addEventListener(\"error\", setAttributeFromEvent);\n    } else {\n      setStatus(script.status ?? cachedScriptStatus ?? \"loading\");\n    }\n    const setStateFromEvent = (event) => {\n      const newStatus = event.type === \"load\" ? \"ready\" : \"error\";\n      setStatus(newStatus);\n      cachedScriptStatuses.set(src, newStatus);\n    };\n    scriptNode.addEventListener(\"load\", setStateFromEvent);\n    scriptNode.addEventListener(\"error\", setStateFromEvent);\n    return () => {\n      if (scriptNode) {\n        scriptNode.removeEventListener(\"load\", setStateFromEvent);\n        scriptNode.removeEventListener(\"error\", setStateFromEvent);\n      }\n      if (scriptNode && (options == null ? void 0 : options.removeOnUnmount)) {\n        scriptNode.remove();\n        cachedScriptStatuses.delete(src);\n      }\n    };\n  }, [src, options == null ? void 0 : options.shouldPreventLoad, options == null ? void 0 : options.removeOnUnmount, options == null ? void 0 : options.id]);\n  return status;\n}\nvar IS_SERVER5 = typeof window === \"undefined\";\nfunction useScrollLock(options = {}) {\n  const { autoLock = true, lockTarget, widthReflow = true } = options;\n  const [isLocked, setIsLocked] = useState(false);\n  const target = useRef(null);\n  const originalStyle = useRef(null);\n  const lock = () => {\n    if (target.current) {\n      const { overflow, paddingRight } = target.current.style;\n      originalStyle.current = { overflow, paddingRight };\n      if (widthReflow) {\n        const offsetWidth = target.current === document.body ? window.innerWidth : target.current.offsetWidth;\n        const currentPaddingRight = parseInt(window.getComputedStyle(target.current).paddingRight, 10) || 0;\n        const scrollbarWidth = offsetWidth - target.current.scrollWidth;\n        target.current.style.paddingRight = `${scrollbarWidth + currentPaddingRight}px`;\n      }\n      target.current.style.overflow = \"hidden\";\n      setIsLocked(true);\n    }\n  };\n  const unlock = () => {\n    if (target.current && originalStyle.current) {\n      target.current.style.overflow = originalStyle.current.overflow;\n      if (widthReflow) {\n        target.current.style.paddingRight = originalStyle.current.paddingRight;\n      }\n    }\n    setIsLocked(false);\n  };\n  useIsomorphicLayoutEffect(() => {\n    if (IS_SERVER5)\n      return;\n    if (lockTarget) {\n      target.current = typeof lockTarget === \"string\" ? document.querySelector(lockTarget) : lockTarget;\n    }\n    if (!target.current) {\n      target.current = document.body;\n    }\n    if (autoLock) {\n      lock();\n    }\n    return () => {\n      unlock();\n    };\n  }, [autoLock, lockTarget, widthReflow]);\n  return { isLocked, lock, unlock };\n}\nvar IS_SERVER6 = typeof window === \"undefined\";\nfunction useSessionStorage(key, initialValue, options = {}) {\n  const { initializeWithValue = true } = options;\n  const serializer = useCallback(\n    (value) => {\n      if (options.serializer) {\n        return options.serializer(value);\n      }\n      return JSON.stringify(value);\n    },\n    [options]\n  );\n  const deserializer = useCallback(\n    (value) => {\n      if (options.deserializer) {\n        return options.deserializer(value);\n      }\n      if (value === \"undefined\") {\n        return void 0;\n      }\n      const defaultValue = initialValue instanceof Function ? initialValue() : initialValue;\n      let parsed;\n      try {\n        parsed = JSON.parse(value);\n      } catch (error) {\n        console.error(\"Error parsing JSON:\", error);\n        return defaultValue;\n      }\n      return parsed;\n    },\n    [options, initialValue]\n  );\n  const readValue = useCallback(() => {\n    const initialValueToUse = initialValue instanceof Function ? initialValue() : initialValue;\n    if (IS_SERVER6) {\n      return initialValueToUse;\n    }\n    try {\n      const raw = window.sessionStorage.getItem(key);\n      return raw ? deserializer(raw) : initialValueToUse;\n    } catch (error) {\n      console.warn(`Error reading sessionStorage key \\u201C${key}\\u201D:`, error);\n      return initialValueToUse;\n    }\n  }, [initialValue, key, deserializer]);\n  const [storedValue, setStoredValue] = useState(() => {\n    if (initializeWithValue) {\n      return readValue();\n    }\n    return initialValue instanceof Function ? initialValue() : initialValue;\n  });\n  const setValue = useEventCallback((value) => {\n    if (IS_SERVER6) {\n      console.warn(\n        `Tried setting sessionStorage key \\u201C${key}\\u201D even though environment is not a client`\n      );\n    }\n    try {\n      const newValue = value instanceof Function ? value(readValue()) : value;\n      window.sessionStorage.setItem(key, serializer(newValue));\n      setStoredValue(newValue);\n      window.dispatchEvent(new StorageEvent(\"session-storage\", { key }));\n    } catch (error) {\n      console.warn(`Error setting sessionStorage key \\u201C${key}\\u201D:`, error);\n    }\n  });\n  useEffect(() => {\n    setStoredValue(readValue());\n  }, [key]);\n  const handleStorageChange = useCallback(\n    (event) => {\n      if ((event == null ? void 0 : event.key) && event.key !== key) {\n        return;\n      }\n      setStoredValue(readValue());\n    },\n    [key, readValue]\n  );\n  useEventListener(\"storage\", handleStorageChange);\n  useEventListener(\"session-storage\", handleStorageChange);\n  return [storedValue, setValue];\n}\n\n// src/useSsr/useSsr.ts\nfunction useSsr() {\n  var _a;\n  const isDOM = (\n    // eslint-disable-next-line @typescript-eslint/prefer-optional-chain\n    typeof window !== \"undefined\" && !!((_a = window == null ? void 0 : window.document) == null ? void 0 : _a.documentElement)\n  );\n  return {\n    isBrowser: isDOM,\n    isServer: !isDOM\n  };\n}\nfunction useStep(maxStep) {\n  const [currentStep, setCurrentStep] = useState(1);\n  const canGoToNextStep = currentStep + 1 <= maxStep;\n  const canGoToPrevStep = currentStep - 1 > 0;\n  const setStep = useCallback(\n    (step) => {\n      const newStep = step instanceof Function ? step(currentStep) : step;\n      if (newStep >= 1 && newStep <= maxStep) {\n        setCurrentStep(newStep);\n        return;\n      }\n      throw new Error(\"Step not valid\");\n    },\n    [maxStep, currentStep]\n  );\n  const goToNextStep = useCallback(() => {\n    if (canGoToNextStep) {\n      setCurrentStep((step) => step + 1);\n    }\n  }, [canGoToNextStep]);\n  const goToPrevStep = useCallback(() => {\n    if (canGoToPrevStep) {\n      setCurrentStep((step) => step - 1);\n    }\n  }, [canGoToPrevStep]);\n  const reset = useCallback(() => {\n    setCurrentStep(1);\n  }, []);\n  return [\n    currentStep,\n    {\n      goToNextStep,\n      goToPrevStep,\n      canGoToNextStep,\n      canGoToPrevStep,\n      setStep,\n      reset\n    }\n  ];\n}\n\n// src/useTernaryDarkMode/useTernaryDarkMode.ts\nvar COLOR_SCHEME_QUERY2 = \"(prefers-color-scheme: dark)\";\nvar LOCAL_STORAGE_KEY2 = \"usehooks-ts-ternary-dark-mode\";\nfunction useTernaryDarkMode(options) {\n  const defaultValue = typeof options === \"string\" ? \"system\" : (options == null ? void 0 : options.defaultValue) ?? \"system\";\n  const localStorageKey = typeof options === \"string\" ? options : (options == null ? void 0 : options.localStorageKey) ?? LOCAL_STORAGE_KEY2;\n  const initializeWithValue = typeof options === \"string\" ? void 0 : (options == null ? void 0 : options.initializeWithValue) ?? void 0;\n  const isDarkOS = useMediaQuery(COLOR_SCHEME_QUERY2, { initializeWithValue });\n  const [mode, setMode] = useLocalStorage(localStorageKey, defaultValue, {\n    initializeWithValue\n  });\n  const isDarkMode = mode === \"dark\" || mode === \"system\" && isDarkOS;\n  const toggleTernaryDarkMode = () => {\n    const modes = [\"light\", \"system\", \"dark\"];\n    setMode((prevMode) => {\n      const nextIndex = (modes.indexOf(prevMode) + 1) % modes.length;\n      return modes[nextIndex];\n    });\n  };\n  return {\n    isDarkMode,\n    ternaryDarkMode: mode,\n    setTernaryDarkMode: setMode,\n    toggleTernaryDarkMode\n  };\n}\nfunction useTimeout(callback, delay) {\n  const savedCallback = useRef(callback);\n  useIsomorphicLayoutEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n  useEffect(() => {\n    if (!delay && delay !== 0) {\n      return;\n    }\n    const id = setTimeout(() => {\n      savedCallback.current();\n    }, delay);\n    return () => {\n      clearTimeout(id);\n    };\n  }, [delay]);\n}\nfunction useToggle(defaultValue) {\n  const [value, setValue] = useState(!!defaultValue);\n  const toggle = useCallback(() => {\n    setValue((x) => !x);\n  }, []);\n  return [value, toggle, setValue];\n}\nfunction useUpdateEffect(effect, deps) {\n  const isFirst = useIsFirstRender();\n  useEffect(() => {\n    if (!isFirst) {\n      return effect();\n    }\n  }, deps);\n}\nvar IS_SERVER7 = typeof window === \"undefined\";\nfunction useWindowSize(options = {}) {\n  let { initializeWithValue = true } = options;\n  if (IS_SERVER7) {\n    initializeWithValue = false;\n  }\n  const [windowSize, setWindowSize] = useState(() => {\n    if (initializeWithValue) {\n      return {\n        width: window.innerWidth,\n        height: window.innerHeight\n      };\n    }\n    return {\n      width: void 0,\n      height: void 0\n    };\n  });\n  const debouncedSetWindowSize = useDebounceCallback(\n    setWindowSize,\n    options == null ? void 0 : options.debounceDelay\n  );\n  function handleSize() {\n    const setSize = (options == null ? void 0 : options.debounceDelay) ? debouncedSetWindowSize : setWindowSize;\n    setSize({\n      width: window.innerWidth,\n      height: window.innerHeight\n    });\n  }\n  useEventListener(\"resize\", handleSize);\n  useIsomorphicLayoutEffect(() => {\n    handleSize();\n  }, []);\n  return windowSize;\n}\n\nexport { useBoolean, useClickAnyWhere, useCopyToClipboard, useCountdown, useCounter, useDarkMode, useDebounce, useDebounceCallback, useDebounceValue, useDocumentTitle, useEffectOnce, useElementSize, useEventCallback, useEventListener, useFetch, useHover, useImageOnLoad, useIntersectionObserver, useInterval, useIsClient, useIsFirstRender, useIsMounted, useIsomorphicLayoutEffect, useLocalStorage, useLockedBody, useMap, useMediaQuery, useOnClickOutside, useReadLocalStorage, useResizeObserver, useScreen, useScript, useScrollLock, useSessionStorage, useSsr, useStep, useTernaryDarkMode, useTimeout, useToggle, useUnmount, useUpdateEffect, useWindowSize };\n","export function px(value: number) {\n  return `${value}px`\n}\n","import * as React from 'react'\nimport styled from 'styled-components'\n\nimport { px } from '../utils'\n\nconst Styles = styled.div`\n    position: absolute;\n    background: rgba(110, 136, 255, 0.8);\n    border: 1px solid rgb(192 206 212 / 60%);\n`\n\nexport function MiniNode(props: { left: number, top: number, width: number, height: number }) {\n  return <Styles style={{\n    left: px(props.left),\n    top: px(props.top),\n    width: px(props.width),\n    height: px(props.height)\n  }} data-testid=\"minimap-node\"/>\n}\n","import * as React from 'react'\nimport styled from 'styled-components'\n\nimport { useDrag } from '../../../shared/drag'\nimport { Rect, Transform, Translate } from '../types'\nimport { px } from '../utils'\n\nconst MiniViewportStyles = styled.div`\n  position: absolute;\n  background: rgba(255, 251, 128, 0.32);\n  border: 1px solid #ffe52b;\n`\n\nexport function MiniViewport(props: Rect & { containerWidth: number, start(): Transform, translate: Translate }) {\n  const scale = (v: number) => v * props.containerWidth\n  const invert = (v: number) => v / props.containerWidth\n  const drag = useDrag((dx, dy) => props.translate(invert(-dx), invert(-dy)), e => ({ x: e.pageX, y: e.pageY }))\n\n  return <MiniViewportStyles\n    onPointerDown={drag.start}\n    style={{\n      left: px(scale(props.left)),\n      top: px(scale(props.top)),\n      width: px(scale(props.width)),\n      height: px(scale(props.height))\n    }}\n    data-testid=\"minimap-viewport\"\n  />\n}\n","import * as React from 'react'\nimport { useCallback, useRef } from 'react'\nimport styled from 'styled-components'\nimport { useElementSize } from 'usehooks-ts'\n\nimport { Rect, Transform, Translate } from '../types'\nimport { px } from '../utils'\nimport { MiniNode } from './MiniNode'\nimport { MiniViewport } from './MiniViewport'\n\nconst Styles = styled.div<{ size: number }>`\n    position: absolute;\n    right: 24px;\n    bottom: 24px;\n    background: rgba(229, 234, 239, 0.65);\n    padding: 20px;\n    overflow: hidden;\n    border: 1px solid #b1b7ff;\n    border-radius: 8px;\n    box-sizing: border-box;\n`\n\ntype Props = {\n    size: number\n    ratio: number\n    nodes: Rect[]\n    viewport: Rect\n    start(): Transform\n    translate: Translate\n    point(x: number, y: number): void\n}\n\nexport function Minimap(props: Props) {\n  const container = useRef<HTMLElement | null>()\n  const [containerRef, { width: containerWidth }] = useElementSize()\n\n  if (!containerWidth) return null\n  const scale = (v: number) => v * containerWidth\n  const ref = useCallback((node: HTMLDivElement | null) => {\n    container.current = node\n    containerRef(node)\n  }, [containerRef])\n\n  return <Styles\n    size={props.size}\n    style={{\n      width: px(props.size * props.ratio),\n      height: px(props.size)\n    }}\n    onPointerDown={e => {\n      e.stopPropagation()\n      e.preventDefault()\n    }}\n    onDoubleClick={e => {\n      e.stopPropagation()\n      e.preventDefault()\n      if (!container.current) return\n      const box = container.current.getBoundingClientRect()\n      const x = (e.clientX - box.left) / (props.size * props.ratio)\n      const y = (e.clientY - box.top) / (props.size * props.ratio)\n\n      props.point(x, y)\n    }}\n    ref={ref}\n    data-testid=\"minimap\"\n  >\n    {containerWidth && props.nodes.map((node, i) => (\n      <MiniNode\n        key={i}\n        left={scale(node.left)}\n        top={scale(node.top)}\n        width={scale(node.width)}\n        height={scale(node.height)}\n      />\n    ))}\n    <MiniViewport\n      {...props.viewport}\n      start={props.start}\n      containerWidth={containerWidth}\n      translate={props.translate}\n    />\n  </Styles>\n}\n","\nimport * as React from 'react'\nimport { BaseSchemes } from 'rete'\n\nimport { RenderPreset } from '../types'\nimport { Minimap } from './components/Minimap'\nimport { MinimapRender } from './types'\n\n/**\n * Preset for rendering minimap.\n */\nexport function setup<Schemes extends BaseSchemes, K extends MinimapRender>(props?: { size?: number }): RenderPreset<Schemes, K> {\n  return {\n    render(context) {\n      if (context.data.type === 'minimap') {\n        return <Minimap\n          nodes={context.data.nodes}\n          size={props?.size || 200}\n          ratio={context.data.ratio}\n          viewport={context.data.viewport}\n          start={context.data.start}\n          translate={context.data.translate}\n          point={context.data.point}\n        />\n      }\n    }\n  }\n}\n","import * as React from 'react'\nimport styled, { } from 'styled-components'\n\nimport { useDrag } from '../../shared/drag'\nimport { Position } from '../../types'\nimport { Pin as PinType } from './types'\n\nconst pinSize = 20\n\nconst Styles = styled.div<{ selected?: boolean }>`\n  width: ${pinSize}px;\n  height: ${pinSize}px;\n  box-sizing: border-box;\n  background: ${props => props.selected ? '#ffd92c' : 'steelblue'};\n  border: 2px solid white;\n  border-radius: ${pinSize}px;\n`\n\ntype Props = PinType & {\n    contextMenu(): void\n    translate(dx: number, dy: number): void\n    pointerdown(): void\n    pointer(): Position\n}\n\nexport function Pin(props: Props) {\n  const drag = useDrag((dx, dy) => props.translate(dx, dy), props.pointer)\n  const { x, y } = props.position\n\n  return (\n    <Styles\n      onPointerDown={e => {\n        e.stopPropagation()\n        e.preventDefault()\n        drag.start(e)\n        props.pointerdown()\n      }}\n      onContextMenu={e => {\n        e.stopPropagation()\n        e.preventDefault()\n        props.contextMenu()\n      }}\n      selected={props.selected}\n      style={{ position: 'absolute', top: `${y - pinSize / 2}px`, left: `${x - pinSize / 2}px` }}\n      data-testid=\"pin\"\n    >\n\n    </Styles>\n  )\n}\n","\nimport * as React from 'react'\nimport { BaseSchemes } from 'rete'\nimport { BaseAreaPlugin } from 'rete-area-plugin'\n\nimport { Position } from '../../types'\nimport { RenderPreset } from '../types'\nimport { Pin } from './Pin'\nimport { PinData, PinsRender } from './types'\n\ntype Props = {\n  translate?: (id: string, dx: number, dy: number) => void\n  contextMenu?: (id: string) => void\n  pointerdown?: (id: string) => void\n}\n\n/**\n * Preset for rendering pins.\n */\nexport function setup<Schemes extends BaseSchemes, K extends PinsRender>(props?: Props): RenderPreset<Schemes, K> {\n  function renderPins(data: PinData, pointer: () => Position) {\n    return <>\n      {data.pins.map(pin => (\n        <Pin\n          {...pin}\n          key={pin.id}\n          contextMenu={() => props?.contextMenu && props.contextMenu(pin.id)}\n          translate={(dx, dy) => props?.translate && props.translate(pin.id, dx, dy)}\n          pointerdown={() => props?.pointerdown && props.pointerdown(pin.id)}\n          pointer={pointer}\n        />\n      ))}\n    </>\n  }\n\n  return {\n    render(context, plugin) {\n      const data = context.data\n      const area = plugin.parentScope<BaseAreaPlugin<Schemes, PinsRender>>(BaseAreaPlugin)\n\n      if (data.type === 'reroute-pins') {\n        return renderPins(data.data, () => area.area.pointer)\n      }\n    }\n  }\n}\n","import * as React from 'react'\nimport { BaseSchemes, CanAssignSignal, Scope } from 'rete'\n\nimport { RenderPreset } from './presets/types'\nimport { getRenderer, Renderer } from './renderer'\nimport { Position, RenderSignal } from './types'\nimport { Root } from './utils'\n\nexport * as Presets from './presets'\nexport type { ClassicScheme, ReactArea2D, RenderEmit } from './presets/classic'\nexport { RefComponent } from './ref-component'\nexport * from './shared'\nexport * from './types'\nexport { useRete } from './utils'\n\n/**\n * Signals that can be emitted by the plugin\n * @priority 9\n */\nexport type Produces<Schemes extends BaseSchemes> =\n  | { type: 'connectionpath', data: { payload: Schemes['Connection'], path?: string, points: Position[] } }\n\ntype Requires<Schemes extends BaseSchemes> =\n  | RenderSignal<'node', { payload: Schemes['Node'] }>\n  | RenderSignal<'connection', { payload: Schemes['Connection'], start?: Position, end?: Position }>\n  | { type: 'unmount', data: { element: HTMLElement } }\n\n/**\n * Plugin props\n */\nexport type Props = {\n  /** root factory for React.js 18+ */\n  createRoot?: (container: Element | DocumentFragment) => any\n}\n\n/**\n * React plugin. Renders nodes, connections and other elements using React.\n * @priority 10\n * @emits connectionpath\n * @listens render\n * @listens unmount\n */\nexport class ReactPlugin<Schemes extends BaseSchemes, T = Requires<Schemes>> extends Scope<Produces<Schemes>, [Requires<Schemes> | T]> {\n  renderer: Renderer\n  presets: RenderPreset<Schemes, T>[] = []\n\n  constructor(props?: Props) {\n    super('react-render')\n    this.renderer = getRenderer({ createRoot: props?.createRoot })\n\n    this.addPipe(context => {\n      if (!context || typeof context !== 'object' || !('type' in context)) return context\n      if (context.type === 'unmount') {\n        this.unmount(context.data.element)\n      } else if (context.type === 'render') {\n        if ('filled' in context.data && context.data.filled) {\n          return context\n        }\n        if (this.mount(context.data.element, context)) {\n          return {\n            ...context,\n            data: {\n              ...context.data,\n              filled: true\n            }\n          } as typeof context\n        }\n      }\n\n      return context\n    })\n  }\n\n  setParent(scope: Scope<Requires<Schemes> | T>): void {\n    super.setParent(scope)\n\n    this.presets.forEach(preset => {\n      if (preset.attach) preset.attach(this)\n    })\n  }\n\n  private mount(element: HTMLElement, context: Requires<Schemes>) {\n    const parent = this.parentScope()\n\n    for (const preset of this.presets) {\n      const result = preset.render(context as any, this)\n\n      if (!result) continue\n\n      const reactElement = (\n        <Root rendered={() => parent.emit({ type: 'rendered', data: context.data } as T)}>\n          {result}\n        </Root>\n      )\n\n      this.renderer.mount(reactElement, element)\n      return true\n    }\n  }\n\n  private unmount(element: HTMLElement) {\n    this.renderer.unmount(element)\n  }\n\n  /**\n   * Adds a preset to the plugin.\n   * @param preset Preset that can render nodes, connections and other elements.\n   */\n  public addPreset<K>(preset: RenderPreset<Schemes, CanAssignSignal<T, K> extends true ? K : 'Cannot apply preset. Provided signals are not compatible'>) {\n    const local = preset as RenderPreset<Schemes, T>\n\n    if (local.attach) local.attach(this)\n    this.presets.push(local)\n  }\n}\n","import * as ReactDOM from 'react-dom'\n\nexport type Renderer = { mount: ReactDOM.Renderer, unmount: (container: HTMLElement) => void }\n\ntype CreateRoot = (container: Element | DocumentFragment) => any\n\nexport function getRenderer(props?: { createRoot?: CreateRoot }): Renderer {\n  const createRoot = props?.createRoot\n  const wrappers = new WeakMap<HTMLElement, HTMLElement>()\n\n  function getWrapper(container: HTMLElement) {\n    const wrapper = wrappers.get(container)\n\n    if (wrapper) return wrapper\n\n    const span = document.createElement('span')\n\n    container.appendChild(span)\n    return wrappers.set(container, span).get(container) as HTMLElement\n  }\n  function removeWrapper(container: HTMLElement) {\n    const wrapper = wrappers.get(container)\n\n    if (wrapper) wrapper.remove()\n    wrappers.delete(container)\n  }\n\n  if (createRoot) {\n    const roots = new WeakMap<HTMLElement, any>()\n\n    return {\n      mount: ((\n        element: React.DOMElement<React.DOMAttributes<any>, any>,\n        container: HTMLElement\n      ): Element => {\n        const wrapper = getWrapper(container)\n\n        if (!roots.has(wrapper)) {\n          roots.set(wrapper, createRoot(wrapper))\n        }\n        const root = roots.get(wrapper)\n\n        return root.render(element)\n      }) as ReactDOM.Renderer,\n      unmount: (container: HTMLElement) => {\n        const wrapper = getWrapper(container)\n        const root = roots.get(wrapper)\n\n        if (root) {\n          root.unmount()\n          roots.delete(wrapper)\n          removeWrapper(container)\n        }\n      }\n    }\n  }\n\n  return {\n    mount: ((element: React.DOMElement<React.DOMAttributes<any>, any>, container: HTMLElement): Element => {\n      return ReactDOM.render(element, getWrapper(container))\n    }) as ReactDOM.Renderer,\n    unmount: (container: HTMLElement) => {\n      ReactDOM.unmountComponentAtNode(getWrapper(container))\n      removeWrapper(container)\n    }\n  }\n}\n"],"names":["Root","_ref","children","rendered","useEffect","Svg","styled","svg","_templateObject","_taggedTemplateLiteral","Path","path","_templateObject2","props","styles","Connection","React","createElement","d","ConnectionWrapper","ready","_useState2","_slicedToArray","useState","computedStart","setStart","_useState4","computedEnd","setEnd","_useState6","setPath","start","end","flush","useRef","current","apply","f","queueMicrotask","flushSync","Component","unwatch1","s","unwatch2","then","p","data","payload","rootPrefix","useDrag","translate","getPointer","e","previous","_objectSpread","move","moveEvent","dx","x","dy","y","up","window","removeEventListener","addEventListener","useNoDrag","ref","disabled","handleClick","root","element","_reactRootContainer","Object","keys","some","key","startsWith","parentElement","findReactRoot","target","version","document","stopPropagation","dispatchEvent","newEvent","constructor","type","getPrototypeOf","_step","_iterator","_createForOfIteratorHelper","getOwnPropertyNames","n","done","k","value","defineProperty","err","copyEvent","el","Input","input","Control","_React$useState2","setValue","Drag","readOnly","readonly","onChange","val","$nodecolor","$nodecolorselected","$socketsize","$socketcolor","RefComponent","init","unmount","_objectWithoutProperties","_excluded","_extends","RefControl","name","emit","className","RefSocket","nodeId","side","socketKey","NodeStyles","div","Number","isFinite","width","concat","height","selected","css","sortByIndex","entries","sort","a","b","_a$","_b$","index","Node","inputs","outputs","controls","_props$data","id","label","map","_ref2","output","socket","_ref3","_ref4","control","_ref5","_ref6","showControl","Styles","Hoverable","Socket","title","positionWatcher","socketPositionWatcher","getDOMSocketPosition","customize","node","connection","attach","plugin","render","context","parent","parentScope","sourceOutput","targetInput","source","change","listen","_regeneratorRuntime","mark","_callee","response","_response$data","points","curvature","wrap","_context","prev","next","sent","abrupt","length","Error","isLoop","loopConnectionPath","classicConnectionPath","stop","_x","_x2","this","arguments","_Component2","ClassicPreset","InputControl","_Component3","useDebounce","cb","timeout","cancel","clearTimeout","setTimeout","$contextMenuRound","CommonStyle","ItemStyle","hasSubitems","SubitemStyles","_templateObject3","ItemElement","_props$components","_props$components$ite","_props$components2","_props$components2$su","visibleSubitems","setVisibleSubitems","_useDebounce2","useCallback","delay","hide","cancelHide","components","item","call","Subitems","subitems","onClick","handler","Boolean","onPointerDown","onPointerOver","onPointerLeave","SearchInput","Search","component","onInput","$width","Menu","_props$components$mai","_props$components2$co","_props$components3","_props$components3$se","onHide","filter","setFilter","filterRegexp","RegExp","filteredList","items","match","main","Common","common","onMouseOver","onMouseLeave","onWheel","searchBar","search","freeGlobal","global","freeSelf","self","Function","useIsomorphicLayoutEffect","useLayoutEffect","useElementSize","options","initializeWithValue","setRef","readValue","offsetWidth","offsetHeight","size","setSize","handleSize","eventName","savedHandler","targetElement","listener","event","useEventListener","result","px","MiniNode","style","left","top","MiniViewportStyles","MiniViewport","scale","v","containerWidth","invert","drag","pageX","pageY","Minimap","container","_useElementSize2","containerRef","ratio","preventDefault","onDoubleClick","box","getBoundingClientRect","clientX","clientY","point","nodes","i","viewport","pinSize","Pin","pointer","_props$position","position","pointerdown","onContextMenu","contextMenu","area","BaseAreaPlugin","Fragment","pins","pin","renderPins","ReactPlugin","_Scope","_this","_classCallCheck","_defineProperty","_callSuper","renderer","createRoot","wrappers","WeakMap","getWrapper","wrapper","get","span","appendChild","set","removeWrapper","remove","roots","mount","has","ReactDOM","unmountComponentAtNode","getRenderer","addPipe","_typeof","filled","_inherits","scope","_this2","_get","_getPrototypeOf","prototype","presets","forEach","preset","reactElement","local","push","Scope","create","setContainer","editorRef","editor","setEditor","destroy","innerHTML"],"mappings":"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"}